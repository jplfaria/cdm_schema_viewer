import{j as p,R as Xo,T as Zo,P as er,C as Jo,L as eu,S as ru,a as Uu,b as Hu,c as $u,I as Fe,d as Wv,e as Yr,f as Wr,g as Qr,h as Xr,A as Zr}from"./ui-vendor-DuIMt3GF.js";import{b as Qv,R as ue,O as Xv,r as ee,d as vr,g as Zv,e as Jv,f as zu,B as eg}from"./react-vendor-Btl192Pi.js";import{c as rg,u as ng,H as Ku,P as Vu,a as ig,b as tg,d as ag,e as og,R as ug,B as sg,f as cg,C as lg,M as fg,g as dg}from"./reactflow-vendor-D_8HGDAQ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();var nu={},Yu=Qv;nu.createRoot=Yu.createRoot,nu.hydrateRoot=Yu.hydrateRoot;var _h={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wu=ue.createContext&&ue.createContext(_h),ge=function(){return ge=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},ge.apply(this,arguments)},hg=function(e,r){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,i=Object.getOwnPropertySymbols(e);t<i.length;t++)r.indexOf(i[t])<0&&Object.prototype.propertyIsEnumerable.call(e,i[t])&&(n[i[t]]=e[i[t]]);return n};function xh(e){return e&&e.map(function(r,n){return ue.createElement(r.tag,ge({key:n},r.attr),xh(r.child))})}function B(e){return function(r){return ue.createElement(pg,ge({attr:ge({},e.attr)},r),xh(e.child))}}function pg(e){var r=function(n){var i=e.attr,t=e.size,a=e.title,o=hg(e,["attr","size","title"]),u=t||n.size||"1em",s;return n.className&&(s=n.className),e.className&&(s=(s?s+" ":"")+e.className),ue.createElement("svg",ge({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:s,style:ge(ge({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&ue.createElement("title",null,a),e.children)};return Wu!==void 0?ue.createElement(Wu.Consumer,null,function(n){return r(n)}):r(_h)}function vg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function gg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function wh(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function mg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function bg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function yg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}}]})(e)}function _g(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function xg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Qu(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(e)}function wg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function Eg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function Ag(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"18"}},{tag:"line",attr:{x1:"16",y1:"6",x2:"16",y2:"22"}}]})(e)}function qg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}}]})(e)}function Cg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function Sg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function Rg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function Tg(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function Ig(e){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const Eh={},{useDebugValue:Og}=ue,{useSyncExternalStoreWithSelector:jg}=ng;let Xu=!1;const Ng=e=>e;function kg(e,r=Ng,n){(Eh?"production":void 0)!=="production"&&n&&!Xu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Xu=!0);const i=jg(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,n);return Og(i),i}const Zu=e=>{(Eh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof e=="function"?rg(e):e,n=(i,t)=>kg(r,i,t);return Object.assign(n,r),n},Ah=e=>e?Zu(e):Zu,Lg={mode:"overview",zoom:1,center:{x:0,y:0},showMinimap:!0,showGrid:!0,showLabels:!0,searchQuery:"",selectedTypes:["core","relationship","metadata","experimental","enum"],selectedDomains:[],showRelationships:!0,selectedNodes:[],hoveredNode:null,focusedNode:null,theme:"light",colorScheme:"default",fontSize:"medium",showDescriptions:!0,animateTransitions:!0},Ge=Ah(e=>({...Lg,setViewMode:r=>e({mode:r}),setZoom:r=>e({zoom:r}),setCenter:r=>e({center:r}),toggleMinimap:()=>e(r=>({showMinimap:!r.showMinimap})),toggleGrid:()=>e(r=>({showGrid:!r.showGrid})),toggleLabels:()=>e(r=>({showLabels:!r.showLabels})),setSearchQuery:r=>e({searchQuery:r}),toggleEntityType:r=>e(n=>({selectedTypes:n.selectedTypes.includes(r)?n.selectedTypes.filter(t=>t!==r):[...n.selectedTypes,r]})),toggleDomain:r=>e(n=>({selectedDomains:n.selectedDomains.includes(r)?n.selectedDomains.filter(t=>t!==r):[...n.selectedDomains,r]})),toggleRelationships:()=>e(r=>({showRelationships:!r.showRelationships})),clearFilters:()=>e({searchQuery:"",selectedTypes:["core","relationship","metadata","experimental","enum"],selectedDomains:[],showRelationships:!0}),selectNode:(r,n=!1)=>e(i=>n?{selectedNodes:i.selectedNodes.includes(r)?i.selectedNodes.filter(a=>a!==r):[...i.selectedNodes,r]}:{selectedNodes:[r]}),clearSelection:()=>e({selectedNodes:[],focusedNode:null}),setHoveredNode:r=>e({hoveredNode:r}),setFocusedNode:r=>e({focusedNode:r}),setTheme:r=>e({theme:r}),setColorScheme:r=>e({colorScheme:r}),setFontSize:r=>e({fontSize:r}),toggleDescriptions:()=>e(r=>({showDescriptions:!r.showDescriptions})),toggleAnimations:()=>e(r=>({animateTransitions:!r.animateTransitions}))}));function Fg(){const{theme:e,setTheme:r,colorScheme:n,setColorScheme:i,fontSize:t,setFontSize:a}=Ge();return p.jsxs("header",{className:"flex items-center justify-between border-b bg-background px-4 py-3",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("h1",{className:"text-xl font-bold",children:"CDM Schema Viewer"}),p.jsx("span",{className:"text-sm text-muted-foreground",children:"KBase Common Data Model"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>r(e==="light"?"dark":"light"),className:"rounded p-2 hover:bg-muted","aria-label":"Toggle theme",children:e==="light"?p.jsx(Cg,{size:18}):p.jsx(Tg,{size:18})}),p.jsxs(Xo,{children:[p.jsx(Zo,{asChild:!0,children:p.jsx("button",{className:"rounded p-2 hover:bg-muted","aria-label":"Settings",children:p.jsx(Rg,{size:18})})}),p.jsx(er,{children:p.jsxs(Jo,{className:"z-50 min-w-[220px] rounded-md border bg-background p-1 shadow-lg",sideOffset:5,children:[p.jsx(eu,{className:"px-2 py-1.5 text-sm font-semibold",children:"Display Settings"}),p.jsx(ru,{className:"my-1 h-px bg-border"}),p.jsxs(Uu,{children:[p.jsxs(Hu,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",children:["Color Scheme",p.jsx("div",{className:"ml-auto text-xs text-muted-foreground",children:n})]}),p.jsx(er,{children:p.jsx($u,{className:"z-50 min-w-[160px] rounded-md border bg-background p-1 shadow-lg",sideOffset:2,alignOffset:-5,children:["default","colorblind","highContrast"].map(o=>p.jsxs(Fe,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>i(o),children:[o,n===o&&p.jsx("span",{className:"ml-auto",children:"✓"})]},o))})})]}),p.jsxs(Uu,{children:[p.jsxs(Hu,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",children:["Font Size",p.jsx("div",{className:"ml-auto text-xs text-muted-foreground",children:t})]}),p.jsx(er,{children:p.jsx($u,{className:"z-50 min-w-[160px] rounded-md border bg-background p-1 shadow-lg",sideOffset:2,alignOffset:-5,children:["small","medium","large"].map(o=>p.jsxs(Fe,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>a(o),children:[o,t===o&&p.jsx("span",{className:"ml-auto",children:"✓"})]},o))})})]})]})})]}),p.jsx("button",{className:"rounded p-2 hover:bg-muted","aria-label":"About",children:p.jsx(xg,{size:18})}),p.jsx("a",{href:"https://github.com/jplfaria/cdm_schema_viewer",target:"_blank",rel:"noopener noreferrer",className:"rounded p-2 hover:bg-muted","aria-label":"View on GitHub",children:p.jsx(yg,{size:18})})]})]})}function qh(e){var r,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var t=e.length;for(r=0;r<t;r++)e[r]&&(n=qh(e[r]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function rr(){for(var e,r,n=0,i="",t=arguments.length;n<t;n++)(e=arguments[n])&&(r=qh(e))&&(i&&(i+=" "),i+=r);return i}function Mg(){const e=Ge(r=>r.theme);return p.jsxs("div",{className:rr("flex h-screen flex-col overflow-hidden",e==="dark"||e==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":""),children:[p.jsx(Fg,{}),p.jsx("main",{className:"flex-1 overflow-hidden",children:p.jsx(Xv,{})})]})}const De=Ah(e=>({schema:null,graph:null,loading:!1,error:null,loadSchema:r=>e({schema:r,error:null}),setGraph:r=>e({graph:r}),updateNodePosition:(r,n)=>e(i=>{if(!i.graph)return i;const t=i.graph.nodes.map(a=>a.id===r?{...a,position:n}:a);return{graph:{...i.graph,nodes:t}}}),toggleNodeExpanded:r=>e(n=>{if(!n.graph)return n;const i=n.graph.nodes.map(t=>t.id===r?{...t,data:{...t.data,isExpanded:!t.data.isExpanded}}:t);return{graph:{...n.graph,nodes:i}}}),setLoading:r=>e({loading:r}),setError:r=>e({error:r}),reset:()=>e({schema:null,graph:null,loading:!1,error:null})}));function Pg(e){if(e.represents_relationship)return"relationship";const r=e.name.toLowerCase();return["contig","contigcollection","feature","protein","sample"].includes(r)?"core":["contributor","publication","project","datasource"].includes(r)?"metadata":["experiment","protocol","event"].includes(r)?"experimental":"core"}const Ch=ee.memo(({data:e,selected:r})=>{const{showDescriptions:n,fontSize:i,showLabels:t}=Ge(),a={core:"border-entity-core bg-entity-core/10",relationship:"border-entity-relationship bg-entity-relationship/10",metadata:"border-entity-metadata bg-entity-metadata/10",experimental:"border-entity-experimental bg-entity-experimental/10",enum:"border-entity-enum bg-entity-enum/10"},o={small:"text-xs",medium:"text-sm",large:"text-base"},u=e.attributes.filter(c=>c.isIdentifier),s=e.attributes.filter(c=>c.required&&!c.isIdentifier),l=e.attributes.filter(c=>!c.required&&!c.isIdentifier);return p.jsxs(p.Fragment,{children:[p.jsx(Ku,{type:"target",position:Vu.Top}),p.jsxs("div",{className:rr("min-w-[200px] rounded-lg border-2 bg-background p-3 shadow-sm transition-all",a[e.type],o[i],r&&"ring-2 ring-blue-500 ring-offset-2","hover:shadow-md"),children:[p.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{className:"hover:bg-muted rounded p-0.5",children:e.isExpanded?p.jsx(vg,{size:14}):p.jsx(wh,{size:14})}),p.jsx("h3",{className:"font-semibold",children:e.label})]}),e.isRelationship&&p.jsx("span",{className:"rounded bg-muted px-1.5 py-0.5 text-xs",children:"Join"})]}),n&&e.description&&p.jsx("p",{className:"mb-2 text-xs text-muted-foreground line-clamp-2",children:e.description}),e.domain&&p.jsx("div",{className:"mb-2",children:p.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs capitalize",children:e.domain})}),e.isExpanded&&t&&p.jsxs("div",{className:"mt-3 space-y-2 border-t pt-2",children:[u.length>0&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-muted-foreground",children:[p.jsx(Qu,{size:12}),p.jsx("span",{children:"Identifiers"})]}),p.jsx("div",{className:"space-y-1",children:u.map(c=>p.jsxs("div",{className:"flex items-center justify-between text-xs",children:[p.jsx("span",{className:"font-medium",children:c.name}),p.jsx("span",{className:"text-muted-foreground",children:c.type})]},c.name))})]}),s.length>0&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-muted-foreground",children:[p.jsx(Eg,{size:12}),p.jsx("span",{children:"Required"})]}),p.jsxs("div",{className:"space-y-1",children:[s.slice(0,5).map(c=>p.jsxs("div",{className:"flex items-center justify-between text-xs",children:[p.jsx("span",{children:c.name}),p.jsx("span",{className:"text-muted-foreground",children:c.type})]},c.name)),s.length>5&&p.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",s.length-5," more..."]})]})]}),l.length>0&&p.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.length," optional attributes"]})]}),!e.isExpanded&&p.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-muted-foreground",children:[p.jsxs("span",{children:[e.attributes.length," attributes"]}),u.length>0&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Qu,{size:10}),u.length]})]})]}),p.jsx(Ku,{type:"source",position:Vu.Bottom})]})});Ch.displayName="EntityNode";function fu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jr,Ju;function Dg(){if(Ju)return Jr;Ju=1;function e(){this.__data__=[],this.size=0}return Jr=e,Jr}var en,es;function Ue(){if(es)return en;es=1;function e(r,n){return r===n||r!==r&&n!==n}return en=e,en}var rn,rs;function Sr(){if(rs)return rn;rs=1;var e=Ue();function r(n,i){for(var t=n.length;t--;)if(e(n[t][0],i))return t;return-1}return rn=r,rn}var nn,ns;function Bg(){if(ns)return nn;ns=1;var e=Sr(),r=Array.prototype,n=r.splice;function i(t){var a=this.__data__,o=e(a,t);if(o<0)return!1;var u=a.length-1;return o==u?a.pop():n.call(a,o,1),--this.size,!0}return nn=i,nn}var tn,is;function Gg(){if(is)return tn;is=1;var e=Sr();function r(n){var i=this.__data__,t=e(i,n);return t<0?void 0:i[t][1]}return tn=r,tn}var an,ts;function Ug(){if(ts)return an;ts=1;var e=Sr();function r(n){return e(this.__data__,n)>-1}return an=r,an}var on,as;function Hg(){if(as)return on;as=1;var e=Sr();function r(n,i){var t=this.__data__,a=e(t,n);return a<0?(++this.size,t.push([n,i])):t[a][1]=i,this}return on=r,on}var un,os;function Rr(){if(os)return un;os=1;var e=Dg(),r=Bg(),n=Gg(),i=Ug(),t=Hg();function a(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=t,un=a,un}var sn,us;function $g(){if(us)return sn;us=1;var e=Rr();function r(){this.__data__=new e,this.size=0}return sn=r,sn}var cn,ss;function zg(){if(ss)return cn;ss=1;function e(r){var n=this.__data__,i=n.delete(r);return this.size=n.size,i}return cn=e,cn}var ln,cs;function Kg(){if(cs)return ln;cs=1;function e(r){return this.__data__.get(r)}return ln=e,ln}var fn,ls;function Vg(){if(ls)return fn;ls=1;function e(r){return this.__data__.has(r)}return fn=e,fn}var dn,fs;function Sh(){if(fs)return dn;fs=1;var e=typeof vr=="object"&&vr&&vr.Object===Object&&vr;return dn=e,dn}var hn,ds;function X(){if(ds)return hn;ds=1;var e=Sh(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=e||r||Function("return this")();return hn=n,hn}var pn,hs;function He(){if(hs)return pn;hs=1;var e=X(),r=e.Symbol;return pn=r,pn}var vn,ps;function Yg(){if(ps)return vn;ps=1;var e=He(),r=Object.prototype,n=r.hasOwnProperty,i=r.toString,t=e?e.toStringTag:void 0;function a(o){var u=n.call(o,t),s=o[t];try{o[t]=void 0;var l=!0}catch{}var c=i.call(o);return l&&(u?o[t]=s:delete o[t]),c}return vn=a,vn}var gn,vs;function Wg(){if(vs)return gn;vs=1;var e=Object.prototype,r=e.toString;function n(i){return r.call(i)}return gn=n,gn}var mn,gs;function qe(){if(gs)return mn;gs=1;var e=He(),r=Yg(),n=Wg(),i="[object Null]",t="[object Undefined]",a=e?e.toStringTag:void 0;function o(u){return u==null?u===void 0?t:i:a&&a in Object(u)?r(u):n(u)}return mn=o,mn}var bn,ms;function W(){if(ms)return bn;ms=1;function e(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return bn=e,bn}var yn,bs;function or(){if(bs)return yn;bs=1;var e=qe(),r=W(),n="[object AsyncFunction]",i="[object Function]",t="[object GeneratorFunction]",a="[object Proxy]";function o(u){if(!r(u))return!1;var s=e(u);return s==i||s==t||s==n||s==a}return yn=o,yn}var _n,ys;function Qg(){if(ys)return _n;ys=1;var e=X(),r=e["__core-js_shared__"];return _n=r,_n}var xn,_s;function Xg(){if(_s)return xn;_s=1;var e=Qg(),r=function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!r&&r in i}return xn=n,xn}var wn,xs;function Rh(){if(xs)return wn;xs=1;var e=Function.prototype,r=e.toString;function n(i){if(i!=null){try{return r.call(i)}catch{}try{return i+""}catch{}}return""}return wn=n,wn}var En,ws;function Zg(){if(ws)return En;ws=1;var e=or(),r=Xg(),n=W(),i=Rh(),t=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,s=o.toString,l=u.hasOwnProperty,c=RegExp("^"+s.call(l).replace(t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!n(d)||r(d))return!1;var h=e(d)?c:a;return h.test(i(d))}return En=f,En}var An,Es;function Jg(){if(Es)return An;Es=1;function e(r,n){return r==null?void 0:r[n]}return An=e,An}var qn,As;function Ce(){if(As)return qn;As=1;var e=Zg(),r=Jg();function n(i,t){var a=r(i,t);return e(a)?a:void 0}return qn=n,qn}var Cn,qs;function du(){if(qs)return Cn;qs=1;var e=Ce(),r=X(),n=e(r,"Map");return Cn=n,Cn}var Sn,Cs;function Tr(){if(Cs)return Sn;Cs=1;var e=Ce(),r=e(Object,"create");return Sn=r,Sn}var Rn,Ss;function em(){if(Ss)return Rn;Ss=1;var e=Tr();function r(){this.__data__=e?e(null):{},this.size=0}return Rn=r,Rn}var Tn,Rs;function rm(){if(Rs)return Tn;Rs=1;function e(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}return Tn=e,Tn}var In,Ts;function nm(){if(Ts)return In;Ts=1;var e=Tr(),r="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function t(a){var o=this.__data__;if(e){var u=o[a];return u===r?void 0:u}return i.call(o,a)?o[a]:void 0}return In=t,In}var On,Is;function im(){if(Is)return On;Is=1;var e=Tr(),r=Object.prototype,n=r.hasOwnProperty;function i(t){var a=this.__data__;return e?a[t]!==void 0:n.call(a,t)}return On=i,On}var jn,Os;function tm(){if(Os)return jn;Os=1;var e=Tr(),r="__lodash_hash_undefined__";function n(i,t){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&t===void 0?r:t,this}return jn=n,jn}var Nn,js;function am(){if(js)return Nn;js=1;var e=em(),r=rm(),n=nm(),i=im(),t=tm();function a(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=t,Nn=a,Nn}var kn,Ns;function om(){if(Ns)return kn;Ns=1;var e=am(),r=Rr(),n=du();function i(){this.size=0,this.__data__={hash:new e,map:new(n||r),string:new e}}return kn=i,kn}var Ln,ks;function um(){if(ks)return Ln;ks=1;function e(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}return Ln=e,Ln}var Fn,Ls;function Ir(){if(Ls)return Fn;Ls=1;var e=um();function r(n,i){var t=n.__data__;return e(i)?t[typeof i=="string"?"string":"hash"]:t.map}return Fn=r,Fn}var Mn,Fs;function sm(){if(Fs)return Mn;Fs=1;var e=Ir();function r(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return Mn=r,Mn}var Pn,Ms;function cm(){if(Ms)return Pn;Ms=1;var e=Ir();function r(n){return e(this,n).get(n)}return Pn=r,Pn}var Dn,Ps;function lm(){if(Ps)return Dn;Ps=1;var e=Ir();function r(n){return e(this,n).has(n)}return Dn=r,Dn}var Bn,Ds;function fm(){if(Ds)return Bn;Ds=1;var e=Ir();function r(n,i){var t=e(this,n),a=t.size;return t.set(n,i),this.size+=t.size==a?0:1,this}return Bn=r,Bn}var Gn,Bs;function hu(){if(Bs)return Gn;Bs=1;var e=om(),r=sm(),n=cm(),i=lm(),t=fm();function a(o){var u=-1,s=o==null?0:o.length;for(this.clear();++u<s;){var l=o[u];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=t,Gn=a,Gn}var Un,Gs;function dm(){if(Gs)return Un;Gs=1;var e=Rr(),r=du(),n=hu(),i=200;function t(a,o){var u=this.__data__;if(u instanceof e){var s=u.__data__;if(!r||s.length<i-1)return s.push([a,o]),this.size=++u.size,this;u=this.__data__=new n(s)}return u.set(a,o),this.size=u.size,this}return Un=t,Un}var Hn,Us;function Or(){if(Us)return Hn;Us=1;var e=Rr(),r=$g(),n=zg(),i=Kg(),t=Vg(),a=dm();function o(u){var s=this.__data__=new e(u);this.size=s.size}return o.prototype.clear=r,o.prototype.delete=n,o.prototype.get=i,o.prototype.has=t,o.prototype.set=a,Hn=o,Hn}var $n,Hs;function pu(){if(Hs)return $n;Hs=1;function e(r,n){for(var i=-1,t=r==null?0:r.length;++i<t&&n(r[i],i,r)!==!1;);return r}return $n=e,$n}var zn,$s;function Th(){if($s)return zn;$s=1;var e=Ce(),r=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return zn=r,zn}var Kn,zs;function jr(){if(zs)return Kn;zs=1;var e=Th();function r(n,i,t){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[i]=t}return Kn=r,Kn}var Vn,Ks;function Nr(){if(Ks)return Vn;Ks=1;var e=jr(),r=Ue(),n=Object.prototype,i=n.hasOwnProperty;function t(a,o,u){var s=a[o];(!(i.call(a,o)&&r(s,u))||u===void 0&&!(o in a))&&e(a,o,u)}return Vn=t,Vn}var Yn,Vs;function ur(){if(Vs)return Yn;Vs=1;var e=Nr(),r=jr();function n(i,t,a,o){var u=!a;a||(a={});for(var s=-1,l=t.length;++s<l;){var c=t[s],f=o?o(a[c],i[c],c,a,i):void 0;f===void 0&&(f=i[c]),u?r(a,c,f):e(a,c,f)}return a}return Yn=n,Yn}var Wn,Ys;function hm(){if(Ys)return Wn;Ys=1;function e(r,n){for(var i=-1,t=Array(r);++i<r;)t[i]=n(i);return t}return Wn=e,Wn}var Qn,Ws;function ne(){if(Ws)return Qn;Ws=1;function e(r){return r!=null&&typeof r=="object"}return Qn=e,Qn}var Xn,Qs;function pm(){if(Qs)return Xn;Qs=1;var e=qe(),r=ne(),n="[object Arguments]";function i(t){return r(t)&&e(t)==n}return Xn=i,Xn}var Zn,Xs;function sr(){if(Xs)return Zn;Xs=1;var e=pm(),r=ne(),n=Object.prototype,i=n.hasOwnProperty,t=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(o){return r(o)&&i.call(o,"callee")&&!t.call(o,"callee")};return Zn=a,Zn}var Jn,Zs;function P(){if(Zs)return Jn;Zs=1;var e=Array.isArray;return Jn=e,Jn}var Ve={exports:{}},ei,Js;function vm(){if(Js)return ei;Js=1;function e(){return!1}return ei=e,ei}Ve.exports;var ec;function $e(){return ec||(ec=1,function(e,r){var n=X(),i=vm(),t=r&&!r.nodeType&&r,a=t&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===t,u=o?n.Buffer:void 0,s=u?u.isBuffer:void 0,l=s||i;e.exports=l}(Ve,Ve.exports)),Ve.exports}var ri,rc;function kr(){if(rc)return ri;rc=1;var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function n(i,t){var a=typeof i;return t=t??e,!!t&&(a=="number"||a!="symbol"&&r.test(i))&&i>-1&&i%1==0&&i<t}return ri=n,ri}var ni,nc;function vu(){if(nc)return ni;nc=1;var e=9007199254740991;function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return ni=r,ni}var ii,ic;function gm(){if(ic)return ii;ic=1;var e=qe(),r=vu(),n=ne(),i="[object Arguments]",t="[object Array]",a="[object Boolean]",o="[object Date]",u="[object Error]",s="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",v="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",C="[object Float64Array]",q="[object Int8Array]",I="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",R="[object Uint8ClampedArray]",O="[object Uint16Array]",N="[object Uint32Array]",A={};A[b]=A[C]=A[q]=A[I]=A[w]=A[x]=A[R]=A[O]=A[N]=!0,A[i]=A[t]=A[m]=A[a]=A[y]=A[o]=A[u]=A[s]=A[l]=A[c]=A[f]=A[d]=A[h]=A[v]=A[g]=!1;function F(G){return n(G)&&r(G.length)&&!!A[e(G)]}return ii=F,ii}var ti,tc;function Lr(){if(tc)return ti;tc=1;function e(r){return function(n){return r(n)}}return ti=e,ti}var Ye={exports:{}};Ye.exports;var ac;function gu(){return ac||(ac=1,function(e,r){var n=Sh(),i=r&&!r.nodeType&&r,t=i&&!0&&e&&!e.nodeType&&e,a=t&&t.exports===i,o=a&&n.process,u=function(){try{var s=t&&t.require&&t.require("util").types;return s||o&&o.binding&&o.binding("util")}catch{}}();e.exports=u}(Ye,Ye.exports)),Ye.exports}var ai,oc;function cr(){if(oc)return ai;oc=1;var e=gm(),r=Lr(),n=gu(),i=n&&n.isTypedArray,t=i?r(i):e;return ai=t,ai}var oi,uc;function Ih(){if(uc)return oi;uc=1;var e=hm(),r=sr(),n=P(),i=$e(),t=kr(),a=cr(),o=Object.prototype,u=o.hasOwnProperty;function s(l,c){var f=n(l),d=!f&&r(l),h=!f&&!d&&i(l),v=!f&&!d&&!h&&a(l),g=f||d||h||v,m=g?e(l.length,String):[],y=m.length;for(var b in l)(c||u.call(l,b))&&!(g&&(b=="length"||h&&(b=="offset"||b=="parent")||v&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||t(b,y)))&&m.push(b);return m}return oi=s,oi}var ui,sc;function Fr(){if(sc)return ui;sc=1;var e=Object.prototype;function r(n){var i=n&&n.constructor,t=typeof i=="function"&&i.prototype||e;return n===t}return ui=r,ui}var si,cc;function Oh(){if(cc)return si;cc=1;function e(r,n){return function(i){return r(n(i))}}return si=e,si}var ci,lc;function mm(){if(lc)return ci;lc=1;var e=Oh(),r=e(Object.keys,Object);return ci=r,ci}var li,fc;function mu(){if(fc)return li;fc=1;var e=Fr(),r=mm(),n=Object.prototype,i=n.hasOwnProperty;function t(a){if(!e(a))return r(a);var o=[];for(var u in Object(a))i.call(a,u)&&u!="constructor"&&o.push(u);return o}return li=t,li}var fi,dc;function le(){if(dc)return fi;dc=1;var e=or(),r=vu();function n(i){return i!=null&&r(i.length)&&!e(i)}return fi=n,fi}var di,hc;function xe(){if(hc)return di;hc=1;var e=Ih(),r=mu(),n=le();function i(t){return n(t)?e(t):r(t)}return di=i,di}var hi,pc;function bm(){if(pc)return hi;pc=1;var e=ur(),r=xe();function n(i,t){return i&&e(t,r(t),i)}return hi=n,hi}var pi,vc;function ym(){if(vc)return pi;vc=1;function e(r){var n=[];if(r!=null)for(var i in Object(r))n.push(i);return n}return pi=e,pi}var vi,gc;function _m(){if(gc)return vi;gc=1;var e=W(),r=Fr(),n=ym(),i=Object.prototype,t=i.hasOwnProperty;function a(o){if(!e(o))return n(o);var u=r(o),s=[];for(var l in o)l=="constructor"&&(u||!t.call(o,l))||s.push(l);return s}return vi=a,vi}var gi,mc;function Se(){if(mc)return gi;mc=1;var e=Ih(),r=_m(),n=le();function i(t){return n(t)?e(t,!0):r(t)}return gi=i,gi}var mi,bc;function xm(){if(bc)return mi;bc=1;var e=ur(),r=Se();function n(i,t){return i&&e(t,r(t),i)}return mi=n,mi}var We={exports:{}};We.exports;var yc;function jh(){return yc||(yc=1,function(e,r){var n=X(),i=r&&!r.nodeType&&r,t=i&&!0&&e&&!e.nodeType&&e,a=t&&t.exports===i,o=a?n.Buffer:void 0,u=o?o.allocUnsafe:void 0;function s(l,c){if(c)return l.slice();var f=l.length,d=u?u(f):new l.constructor(f);return l.copy(d),d}e.exports=s}(We,We.exports)),We.exports}var bi,_c;function Nh(){if(_c)return bi;_c=1;function e(r,n){var i=-1,t=r.length;for(n||(n=Array(t));++i<t;)n[i]=r[i];return n}return bi=e,bi}var yi,xc;function kh(){if(xc)return yi;xc=1;function e(r,n){for(var i=-1,t=r==null?0:r.length,a=0,o=[];++i<t;){var u=r[i];n(u,i,r)&&(o[a++]=u)}return o}return yi=e,yi}var _i,wc;function Lh(){if(wc)return _i;wc=1;function e(){return[]}return _i=e,_i}var xi,Ec;function bu(){if(Ec)return xi;Ec=1;var e=kh(),r=Lh(),n=Object.prototype,i=n.propertyIsEnumerable,t=Object.getOwnPropertySymbols,a=t?function(o){return o==null?[]:(o=Object(o),e(t(o),function(u){return i.call(o,u)}))}:r;return xi=a,xi}var wi,Ac;function wm(){if(Ac)return wi;Ac=1;var e=ur(),r=bu();function n(i,t){return e(i,r(i),t)}return wi=n,wi}var Ei,qc;function yu(){if(qc)return Ei;qc=1;function e(r,n){for(var i=-1,t=n.length,a=r.length;++i<t;)r[a+i]=n[i];return r}return Ei=e,Ei}var Ai,Cc;function Mr(){if(Cc)return Ai;Cc=1;var e=Oh(),r=e(Object.getPrototypeOf,Object);return Ai=r,Ai}var qi,Sc;function Fh(){if(Sc)return qi;Sc=1;var e=yu(),r=Mr(),n=bu(),i=Lh(),t=Object.getOwnPropertySymbols,a=t?function(o){for(var u=[];o;)e(u,n(o)),o=r(o);return u}:i;return qi=a,qi}var Ci,Rc;function Em(){if(Rc)return Ci;Rc=1;var e=ur(),r=Fh();function n(i,t){return e(i,r(i),t)}return Ci=n,Ci}var Si,Tc;function Mh(){if(Tc)return Si;Tc=1;var e=yu(),r=P();function n(i,t,a){var o=t(i);return r(i)?o:e(o,a(i))}return Si=n,Si}var Ri,Ic;function Ph(){if(Ic)return Ri;Ic=1;var e=Mh(),r=bu(),n=xe();function i(t){return e(t,n,r)}return Ri=i,Ri}var Ti,Oc;function Am(){if(Oc)return Ti;Oc=1;var e=Mh(),r=Fh(),n=Se();function i(t){return e(t,n,r)}return Ti=i,Ti}var Ii,jc;function qm(){if(jc)return Ii;jc=1;var e=Ce(),r=X(),n=e(r,"DataView");return Ii=n,Ii}var Oi,Nc;function Cm(){if(Nc)return Oi;Nc=1;var e=Ce(),r=X(),n=e(r,"Promise");return Oi=n,Oi}var ji,kc;function Dh(){if(kc)return ji;kc=1;var e=Ce(),r=X(),n=e(r,"Set");return ji=n,ji}var Ni,Lc;function Sm(){if(Lc)return Ni;Lc=1;var e=Ce(),r=X(),n=e(r,"WeakMap");return Ni=n,Ni}var ki,Fc;function ze(){if(Fc)return ki;Fc=1;var e=qm(),r=du(),n=Cm(),i=Dh(),t=Sm(),a=qe(),o=Rh(),u="[object Map]",s="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=o(e),v=o(r),g=o(n),m=o(i),y=o(t),b=a;return(e&&b(new e(new ArrayBuffer(1)))!=d||r&&b(new r)!=u||n&&b(n.resolve())!=l||i&&b(new i)!=c||t&&b(new t)!=f)&&(b=function(C){var q=a(C),I=q==s?C.constructor:void 0,w=I?o(I):"";if(w)switch(w){case h:return d;case v:return u;case g:return l;case m:return c;case y:return f}return q}),ki=b,ki}var Li,Mc;function Rm(){if(Mc)return Li;Mc=1;var e=Object.prototype,r=e.hasOwnProperty;function n(i){var t=i.length,a=new i.constructor(t);return t&&typeof i[0]=="string"&&r.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return Li=n,Li}var Fi,Pc;function Bh(){if(Pc)return Fi;Pc=1;var e=X(),r=e.Uint8Array;return Fi=r,Fi}var Mi,Dc;function _u(){if(Dc)return Mi;Dc=1;var e=Bh();function r(n){var i=new n.constructor(n.byteLength);return new e(i).set(new e(n)),i}return Mi=r,Mi}var Pi,Bc;function Tm(){if(Bc)return Pi;Bc=1;var e=_u();function r(n,i){var t=i?e(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}return Pi=r,Pi}var Di,Gc;function Im(){if(Gc)return Di;Gc=1;var e=/\w*$/;function r(n){var i=new n.constructor(n.source,e.exec(n));return i.lastIndex=n.lastIndex,i}return Di=r,Di}var Bi,Uc;function Om(){if(Uc)return Bi;Uc=1;var e=He(),r=e?e.prototype:void 0,n=r?r.valueOf:void 0;function i(t){return n?Object(n.call(t)):{}}return Bi=i,Bi}var Gi,Hc;function Gh(){if(Hc)return Gi;Hc=1;var e=_u();function r(n,i){var t=i?e(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}return Gi=r,Gi}var Ui,$c;function jm(){if($c)return Ui;$c=1;var e=_u(),r=Tm(),n=Im(),i=Om(),t=Gh(),a="[object Boolean]",o="[object Date]",u="[object Map]",s="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",m="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",C="[object Int32Array]",q="[object Uint8Array]",I="[object Uint8ClampedArray]",w="[object Uint16Array]",x="[object Uint32Array]";function R(O,N,A){var F=O.constructor;switch(N){case h:return e(O);case a:case o:return new F(+O);case v:return r(O,A);case g:case m:case y:case b:case C:case q:case I:case w:case x:return t(O,A);case u:return new F;case s:case f:return new F(O);case l:return n(O);case c:return new F;case d:return i(O)}}return Ui=R,Ui}var Hi,zc;function Uh(){if(zc)return Hi;zc=1;var e=W(),r=Object.create,n=function(){function i(){}return function(t){if(!e(t))return{};if(r)return r(t);i.prototype=t;var a=new i;return i.prototype=void 0,a}}();return Hi=n,Hi}var $i,Kc;function Hh(){if(Kc)return $i;Kc=1;var e=Uh(),r=Mr(),n=Fr();function i(t){return typeof t.constructor=="function"&&!n(t)?e(r(t)):{}}return $i=i,$i}var zi,Vc;function Nm(){if(Vc)return zi;Vc=1;var e=ze(),r=ne(),n="[object Map]";function i(t){return r(t)&&e(t)==n}return zi=i,zi}var Ki,Yc;function km(){if(Yc)return Ki;Yc=1;var e=Nm(),r=Lr(),n=gu(),i=n&&n.isMap,t=i?r(i):e;return Ki=t,Ki}var Vi,Wc;function Lm(){if(Wc)return Vi;Wc=1;var e=ze(),r=ne(),n="[object Set]";function i(t){return r(t)&&e(t)==n}return Vi=i,Vi}var Yi,Qc;function Fm(){if(Qc)return Yi;Qc=1;var e=Lm(),r=Lr(),n=gu(),i=n&&n.isSet,t=i?r(i):e;return Yi=t,Yi}var Wi,Xc;function $h(){if(Xc)return Wi;Xc=1;var e=Or(),r=pu(),n=Nr(),i=bm(),t=xm(),a=jh(),o=Nh(),u=wm(),s=Em(),l=Ph(),c=Am(),f=ze(),d=Rm(),h=jm(),v=Hh(),g=P(),m=$e(),y=km(),b=W(),C=Fm(),q=xe(),I=Se(),w=1,x=2,R=4,O="[object Arguments]",N="[object Array]",A="[object Boolean]",F="[object Date]",G="[object Error]",ie="[object Function]",Ie="[object GeneratorFunction]",Vr="[object Map]",Tv="[object Number]",Mu="[object Object]",Iv="[object RegExp]",Ov="[object Set]",jv="[object String]",Nv="[object Symbol]",kv="[object WeakMap]",Lv="[object ArrayBuffer]",Fv="[object DataView]",Mv="[object Float32Array]",Pv="[object Float64Array]",Dv="[object Int8Array]",Bv="[object Int16Array]",Gv="[object Int32Array]",Uv="[object Uint8Array]",Hv="[object Uint8ClampedArray]",$v="[object Uint16Array]",zv="[object Uint32Array]",k={};k[O]=k[N]=k[Lv]=k[Fv]=k[A]=k[F]=k[Mv]=k[Pv]=k[Dv]=k[Bv]=k[Gv]=k[Vr]=k[Tv]=k[Mu]=k[Iv]=k[Ov]=k[jv]=k[Nv]=k[Uv]=k[Hv]=k[$v]=k[zv]=!0,k[G]=k[ie]=k[kv]=!1;function fr(j,Oe,je,Kv,dr,de){var z,hr=Oe&w,pr=Oe&x,Vv=Oe&R;if(je&&(z=dr?je(j,Kv,dr,de):je(j)),z!==void 0)return z;if(!b(j))return j;var Pu=g(j);if(Pu){if(z=d(j),!hr)return o(j,z)}else{var Ne=f(j),Du=Ne==ie||Ne==Ie;if(m(j))return a(j,hr);if(Ne==Mu||Ne==O||Du&&!dr){if(z=pr||Du?{}:v(j),!hr)return pr?s(j,t(z,j)):u(j,i(z,j))}else{if(!k[Ne])return dr?j:{};z=h(j,Ne,hr)}}de||(de=new e);var Bu=de.get(j);if(Bu)return Bu;de.set(j,z),C(j)?j.forEach(function(he){z.add(fr(he,Oe,je,he,j,de))}):y(j)&&j.forEach(function(he,we){z.set(we,fr(he,Oe,je,we,j,de))});var Yv=Vv?pr?c:l:pr?I:q,Gu=Pu?void 0:Yv(j);return r(Gu||j,function(he,we){Gu&&(we=he,he=j[we]),n(z,we,fr(he,Oe,je,we,j,de))}),z}return Wi=fr,Wi}var Qi,Zc;function Mm(){if(Zc)return Qi;Zc=1;var e=$h(),r=4;function n(i){return e(i,r)}return Qi=n,Qi}var Xi,Jc;function xu(){if(Jc)return Xi;Jc=1;function e(r){return function(){return r}}return Xi=e,Xi}var Zi,el;function Pm(){if(el)return Zi;el=1;function e(r){return function(n,i,t){for(var a=-1,o=Object(n),u=t(n),s=u.length;s--;){var l=u[r?s:++a];if(i(o[l],l,o)===!1)break}return n}}return Zi=e,Zi}var Ji,rl;function wu(){if(rl)return Ji;rl=1;var e=Pm(),r=e();return Ji=r,Ji}var et,nl;function Eu(){if(nl)return et;nl=1;var e=wu(),r=xe();function n(i,t){return i&&e(i,t,r)}return et=n,et}var rt,il;function Dm(){if(il)return rt;il=1;var e=le();function r(n,i){return function(t,a){if(t==null)return t;if(!e(t))return n(t,a);for(var o=t.length,u=i?o:-1,s=Object(t);(i?u--:++u<o)&&a(s[u],u,s)!==!1;);return t}}return rt=r,rt}var nt,tl;function Pr(){if(tl)return nt;tl=1;var e=Eu(),r=Dm(),n=r(e);return nt=n,nt}var it,al;function Re(){if(al)return it;al=1;function e(r){return r}return it=e,it}var tt,ol;function zh(){if(ol)return tt;ol=1;var e=Re();function r(n){return typeof n=="function"?n:e}return tt=r,tt}var at,ul;function Kh(){if(ul)return at;ul=1;var e=pu(),r=Pr(),n=zh(),i=P();function t(a,o){var u=i(a)?e:r;return u(a,n(o))}return at=t,at}var ot,sl;function Vh(){return sl||(sl=1,ot=Kh()),ot}var ut,cl;function Bm(){if(cl)return ut;cl=1;var e=Pr();function r(n,i){var t=[];return e(n,function(a,o,u){i(a,o,u)&&t.push(a)}),t}return ut=r,ut}var st,ll;function Gm(){if(ll)return st;ll=1;var e="__lodash_hash_undefined__";function r(n){return this.__data__.set(n,e),this}return st=r,st}var ct,fl;function Um(){if(fl)return ct;fl=1;function e(r){return this.__data__.has(r)}return ct=e,ct}var lt,dl;function Yh(){if(dl)return lt;dl=1;var e=hu(),r=Gm(),n=Um();function i(t){var a=-1,o=t==null?0:t.length;for(this.__data__=new e;++a<o;)this.add(t[a])}return i.prototype.add=i.prototype.push=r,i.prototype.has=n,lt=i,lt}var ft,hl;function Hm(){if(hl)return ft;hl=1;function e(r,n){for(var i=-1,t=r==null?0:r.length;++i<t;)if(n(r[i],i,r))return!0;return!1}return ft=e,ft}var dt,pl;function Wh(){if(pl)return dt;pl=1;function e(r,n){return r.has(n)}return dt=e,dt}var ht,vl;function Qh(){if(vl)return ht;vl=1;var e=Yh(),r=Hm(),n=Wh(),i=1,t=2;function a(o,u,s,l,c,f){var d=s&i,h=o.length,v=u.length;if(h!=v&&!(d&&v>h))return!1;var g=f.get(o),m=f.get(u);if(g&&m)return g==u&&m==o;var y=-1,b=!0,C=s&t?new e:void 0;for(f.set(o,u),f.set(u,o);++y<h;){var q=o[y],I=u[y];if(l)var w=d?l(I,q,y,u,o,f):l(q,I,y,o,u,f);if(w!==void 0){if(w)continue;b=!1;break}if(C){if(!r(u,function(x,R){if(!n(C,R)&&(q===x||c(q,x,s,l,f)))return C.push(R)})){b=!1;break}}else if(!(q===I||c(q,I,s,l,f))){b=!1;break}}return f.delete(o),f.delete(u),b}return ht=a,ht}var pt,gl;function $m(){if(gl)return pt;gl=1;function e(r){var n=-1,i=Array(r.size);return r.forEach(function(t,a){i[++n]=[a,t]}),i}return pt=e,pt}var vt,ml;function Au(){if(ml)return vt;ml=1;function e(r){var n=-1,i=Array(r.size);return r.forEach(function(t){i[++n]=t}),i}return vt=e,vt}var gt,bl;function zm(){if(bl)return gt;bl=1;var e=He(),r=Bh(),n=Ue(),i=Qh(),t=$m(),a=Au(),o=1,u=2,s="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",C=e?e.prototype:void 0,q=C?C.valueOf:void 0;function I(w,x,R,O,N,A,F){switch(R){case b:if(w.byteLength!=x.byteLength||w.byteOffset!=x.byteOffset)return!1;w=w.buffer,x=x.buffer;case y:return!(w.byteLength!=x.byteLength||!A(new r(w),new r(x)));case s:case l:case d:return n(+w,+x);case c:return w.name==x.name&&w.message==x.message;case h:case g:return w==x+"";case f:var G=t;case v:var ie=O&o;if(G||(G=a),w.size!=x.size&&!ie)return!1;var Ie=F.get(w);if(Ie)return Ie==x;O|=u,F.set(w,x);var Vr=i(G(w),G(x),O,N,A,F);return F.delete(w),Vr;case m:if(q)return q.call(w)==q.call(x)}return!1}return gt=I,gt}var mt,yl;function Km(){if(yl)return mt;yl=1;var e=Ph(),r=1,n=Object.prototype,i=n.hasOwnProperty;function t(a,o,u,s,l,c){var f=u&r,d=e(a),h=d.length,v=e(o),g=v.length;if(h!=g&&!f)return!1;for(var m=h;m--;){var y=d[m];if(!(f?y in o:i.call(o,y)))return!1}var b=c.get(a),C=c.get(o);if(b&&C)return b==o&&C==a;var q=!0;c.set(a,o),c.set(o,a);for(var I=f;++m<h;){y=d[m];var w=a[y],x=o[y];if(s)var R=f?s(x,w,y,o,a,c):s(w,x,y,a,o,c);if(!(R===void 0?w===x||l(w,x,u,s,c):R)){q=!1;break}I||(I=y=="constructor")}if(q&&!I){var O=a.constructor,N=o.constructor;O!=N&&"constructor"in a&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(q=!1)}return c.delete(a),c.delete(o),q}return mt=t,mt}var bt,_l;function Vm(){if(_l)return bt;_l=1;var e=Or(),r=Qh(),n=zm(),i=Km(),t=ze(),a=P(),o=$e(),u=cr(),s=1,l="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function v(g,m,y,b,C,q){var I=a(g),w=a(m),x=I?c:t(g),R=w?c:t(m);x=x==l?f:x,R=R==l?f:R;var O=x==f,N=R==f,A=x==R;if(A&&o(g)){if(!o(m))return!1;I=!0,O=!1}if(A&&!O)return q||(q=new e),I||u(g)?r(g,m,y,b,C,q):n(g,m,x,y,b,C,q);if(!(y&s)){var F=O&&h.call(g,"__wrapped__"),G=N&&h.call(m,"__wrapped__");if(F||G){var ie=F?g.value():g,Ie=G?m.value():m;return q||(q=new e),C(ie,Ie,y,b,q)}}return A?(q||(q=new e),i(g,m,y,b,C,q)):!1}return bt=v,bt}var yt,xl;function Xh(){if(xl)return yt;xl=1;var e=Vm(),r=ne();function n(i,t,a,o,u){return i===t?!0:i==null||t==null||!r(i)&&!r(t)?i!==i&&t!==t:e(i,t,a,o,n,u)}return yt=n,yt}var _t,wl;function Ym(){if(wl)return _t;wl=1;var e=Or(),r=Xh(),n=1,i=2;function t(a,o,u,s){var l=u.length,c=l,f=!s;if(a==null)return!c;for(a=Object(a);l--;){var d=u[l];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++l<c;){d=u[l];var h=d[0],v=a[h],g=d[1];if(f&&d[2]){if(v===void 0&&!(h in a))return!1}else{var m=new e;if(s)var y=s(v,g,h,a,o,m);if(!(y===void 0?r(g,v,n|i,s,m):y))return!1}}return!0}return _t=t,_t}var xt,El;function Zh(){if(El)return xt;El=1;var e=W();function r(n){return n===n&&!e(n)}return xt=r,xt}var wt,Al;function Wm(){if(Al)return wt;Al=1;var e=Zh(),r=xe();function n(i){for(var t=r(i),a=t.length;a--;){var o=t[a],u=i[o];t[a]=[o,u,e(u)]}return t}return wt=n,wt}var Et,ql;function Jh(){if(ql)return Et;ql=1;function e(r,n){return function(i){return i==null?!1:i[r]===n&&(n!==void 0||r in Object(i))}}return Et=e,Et}var At,Cl;function Qm(){if(Cl)return At;Cl=1;var e=Ym(),r=Wm(),n=Jh();function i(t){var a=r(t);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===t||e(o,t,a)}}return At=i,At}var qt,Sl;function Ke(){if(Sl)return qt;Sl=1;var e=qe(),r=ne(),n="[object Symbol]";function i(t){return typeof t=="symbol"||r(t)&&e(t)==n}return qt=i,qt}var Ct,Rl;function qu(){if(Rl)return Ct;Rl=1;var e=P(),r=Ke(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function t(a,o){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||r(a)?!0:i.test(a)||!n.test(a)||o!=null&&a in Object(o)}return Ct=t,Ct}var St,Tl;function Xm(){if(Tl)return St;Tl=1;var e=hu(),r="Expected a function";function n(i,t){if(typeof i!="function"||t!=null&&typeof t!="function")throw new TypeError(r);var a=function(){var o=arguments,u=t?t.apply(this,o):o[0],s=a.cache;if(s.has(u))return s.get(u);var l=i.apply(this,o);return a.cache=s.set(u,l)||s,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,St=n,St}var Rt,Il;function Zm(){if(Il)return Rt;Il=1;var e=Xm(),r=500;function n(i){var t=e(i,function(o){return a.size===r&&a.clear(),o}),a=t.cache;return t}return Rt=n,Rt}var Tt,Ol;function Jm(){if(Ol)return Tt;Ol=1;var e=Zm(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(t){var a=[];return t.charCodeAt(0)===46&&a.push(""),t.replace(r,function(o,u,s,l){a.push(s?l.replace(n,"$1"):u||o)}),a});return Tt=i,Tt}var It,jl;function Dr(){if(jl)return It;jl=1;function e(r,n){for(var i=-1,t=r==null?0:r.length,a=Array(t);++i<t;)a[i]=n(r[i],i,r);return a}return It=e,It}var Ot,Nl;function eb(){if(Nl)return Ot;Nl=1;var e=He(),r=Dr(),n=P(),i=Ke(),t=e?e.prototype:void 0,a=t?t.toString:void 0;function o(u){if(typeof u=="string")return u;if(n(u))return r(u,o)+"";if(i(u))return a?a.call(u):"";var s=u+"";return s=="0"&&1/u==-1/0?"-0":s}return Ot=o,Ot}var jt,kl;function ep(){if(kl)return jt;kl=1;var e=eb();function r(n){return n==null?"":e(n)}return jt=r,jt}var Nt,Ll;function Br(){if(Ll)return Nt;Ll=1;var e=P(),r=qu(),n=Jm(),i=ep();function t(a,o){return e(a)?a:r(a,o)?[a]:n(i(a))}return Nt=t,Nt}var kt,Fl;function lr(){if(Fl)return kt;Fl=1;var e=Ke();function r(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return kt=r,kt}var Lt,Ml;function Gr(){if(Ml)return Lt;Ml=1;var e=Br(),r=lr();function n(i,t){t=e(t,i);for(var a=0,o=t.length;i!=null&&a<o;)i=i[r(t[a++])];return a&&a==o?i:void 0}return Lt=n,Lt}var Ft,Pl;function rb(){if(Pl)return Ft;Pl=1;var e=Gr();function r(n,i,t){var a=n==null?void 0:e(n,i);return a===void 0?t:a}return Ft=r,Ft}var Mt,Dl;function nb(){if(Dl)return Mt;Dl=1;function e(r,n){return r!=null&&n in Object(r)}return Mt=e,Mt}var Pt,Bl;function rp(){if(Bl)return Pt;Bl=1;var e=Br(),r=sr(),n=P(),i=kr(),t=vu(),a=lr();function o(u,s,l){s=e(s,u);for(var c=-1,f=s.length,d=!1;++c<f;){var h=a(s[c]);if(!(d=u!=null&&l(u,h)))break;u=u[h]}return d||++c!=f?d:(f=u==null?0:u.length,!!f&&t(f)&&i(h,f)&&(n(u)||r(u)))}return Pt=o,Pt}var Dt,Gl;function np(){if(Gl)return Dt;Gl=1;var e=nb(),r=rp();function n(i,t){return i!=null&&r(i,t,e)}return Dt=n,Dt}var Bt,Ul;function ib(){if(Ul)return Bt;Ul=1;var e=Xh(),r=rb(),n=np(),i=qu(),t=Zh(),a=Jh(),o=lr(),u=1,s=2;function l(c,f){return i(c)&&t(f)?a(o(c),f):function(d){var h=r(d,c);return h===void 0&&h===f?n(d,c):e(f,h,u|s)}}return Bt=l,Bt}var Gt,Hl;function ip(){if(Hl)return Gt;Hl=1;function e(r){return function(n){return n==null?void 0:n[r]}}return Gt=e,Gt}var Ut,$l;function tb(){if($l)return Ut;$l=1;var e=Gr();function r(n){return function(i){return e(i,n)}}return Ut=r,Ut}var Ht,zl;function ab(){if(zl)return Ht;zl=1;var e=ip(),r=tb(),n=qu(),i=lr();function t(a){return n(a)?e(i(a)):r(a)}return Ht=t,Ht}var $t,Kl;function fe(){if(Kl)return $t;Kl=1;var e=Qm(),r=ib(),n=Re(),i=P(),t=ab();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?i(o)?r(o[0],o[1]):e(o):t(o)}return $t=a,$t}var zt,Vl;function tp(){if(Vl)return zt;Vl=1;var e=kh(),r=Bm(),n=fe(),i=P();function t(a,o){var u=i(a)?e:r;return u(a,n(o,3))}return zt=t,zt}var Kt,Yl;function ob(){if(Yl)return Kt;Yl=1;var e=Object.prototype,r=e.hasOwnProperty;function n(i,t){return i!=null&&r.call(i,t)}return Kt=n,Kt}var Vt,Wl;function ap(){if(Wl)return Vt;Wl=1;var e=ob(),r=rp();function n(i,t){return i!=null&&r(i,t,e)}return Vt=n,Vt}var Yt,Ql;function ub(){if(Ql)return Yt;Ql=1;var e=mu(),r=ze(),n=sr(),i=P(),t=le(),a=$e(),o=Fr(),u=cr(),s="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(t(h)&&(i(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||u(h)||n(h)))return!h.length;var v=r(h);if(v==s||v==l)return!h.size;if(o(h))return!e(h).length;for(var g in h)if(f.call(h,g))return!1;return!0}return Yt=d,Yt}var Wt,Xl;function op(){if(Xl)return Wt;Xl=1;function e(r){return r===void 0}return Wt=e,Wt}var Qt,Zl;function up(){if(Zl)return Qt;Zl=1;var e=Pr(),r=le();function n(i,t){var a=-1,o=r(i)?Array(i.length):[];return e(i,function(u,s,l){o[++a]=t(u,s,l)}),o}return Qt=n,Qt}var Xt,Jl;function sp(){if(Jl)return Xt;Jl=1;var e=Dr(),r=fe(),n=up(),i=P();function t(a,o){var u=i(a)?e:n;return u(a,r(o,3))}return Xt=t,Xt}var Zt,ef;function sb(){if(ef)return Zt;ef=1;function e(r,n,i,t){var a=-1,o=r==null?0:r.length;for(t&&o&&(i=r[++a]);++a<o;)i=n(i,r[a],a,r);return i}return Zt=e,Zt}var Jt,rf;function cb(){if(rf)return Jt;rf=1;function e(r,n,i,t,a){return a(r,function(o,u,s){i=t?(t=!1,o):n(i,o,u,s)}),i}return Jt=e,Jt}var ea,nf;function cp(){if(nf)return ea;nf=1;var e=sb(),r=Pr(),n=fe(),i=cb(),t=P();function a(o,u,s){var l=t(o)?e:i,c=arguments.length<3;return l(o,n(u,4),s,c,r)}return ea=a,ea}var ra,tf;function lb(){if(tf)return ra;tf=1;var e=qe(),r=P(),n=ne(),i="[object String]";function t(a){return typeof a=="string"||!r(a)&&n(a)&&e(a)==i}return ra=t,ra}var na,af;function fb(){if(af)return na;af=1;var e=ip(),r=e("length");return na=r,na}var ia,of;function db(){if(of)return ia;of=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",t=r+n+i,a="\\ufe0e\\ufe0f",o="\\u200d",u=RegExp("["+o+e+t+a+"]");function s(l){return u.test(l)}return ia=s,ia}var ta,uf;function hb(){if(uf)return ta;uf=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",t=r+n+i,a="\\ufe0e\\ufe0f",o="["+e+"]",u="["+t+"]",s="\\ud83c[\\udffb-\\udfff]",l="(?:"+u+"|"+s+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",v=l+"?",g="["+a+"]?",m="(?:"+h+"(?:"+[c,f,d].join("|")+")"+g+v+")*",y=g+v+m,b="(?:"+[c+u+"?",u,f,d,o].join("|")+")",C=RegExp(s+"(?="+s+")|"+b+y,"g");function q(I){for(var w=C.lastIndex=0;C.test(I);)++w;return w}return ta=q,ta}var aa,sf;function pb(){if(sf)return aa;sf=1;var e=fb(),r=db(),n=hb();function i(t){return r(t)?n(t):e(t)}return aa=i,aa}var oa,cf;function vb(){if(cf)return oa;cf=1;var e=mu(),r=ze(),n=le(),i=lb(),t=pb(),a="[object Map]",o="[object Set]";function u(s){if(s==null)return 0;if(n(s))return i(s)?t(s):s.length;var l=r(s);return l==a||l==o?s.size:e(s).length}return oa=u,oa}var ua,lf;function gb(){if(lf)return ua;lf=1;var e=pu(),r=Uh(),n=Eu(),i=fe(),t=Mr(),a=P(),o=$e(),u=or(),s=W(),l=cr();function c(f,d,h){var v=a(f),g=v||o(f)||l(f);if(d=i(d,4),h==null){var m=f&&f.constructor;g?h=v?new m:[]:s(f)?h=u(m)?r(t(f)):{}:h={}}return(g?e:n)(f,function(y,b,C){return d(h,y,b,C)}),h}return ua=c,ua}var sa,ff;function mb(){if(ff)return sa;ff=1;var e=He(),r=sr(),n=P(),i=e?e.isConcatSpreadable:void 0;function t(a){return n(a)||r(a)||!!(i&&a&&a[i])}return sa=t,sa}var ca,df;function Cu(){if(df)return ca;df=1;var e=yu(),r=mb();function n(i,t,a,o,u){var s=-1,l=i.length;for(a||(a=r),u||(u=[]);++s<l;){var c=i[s];t>0&&a(c)?t>1?n(c,t-1,a,o,u):e(u,c):o||(u[u.length]=c)}return u}return ca=n,ca}var la,hf;function bb(){if(hf)return la;hf=1;function e(r,n,i){switch(i.length){case 0:return r.call(n);case 1:return r.call(n,i[0]);case 2:return r.call(n,i[0],i[1]);case 3:return r.call(n,i[0],i[1],i[2])}return r.apply(n,i)}return la=e,la}var fa,pf;function lp(){if(pf)return fa;pf=1;var e=bb(),r=Math.max;function n(i,t,a){return t=r(t===void 0?i.length-1:t,0),function(){for(var o=arguments,u=-1,s=r(o.length-t,0),l=Array(s);++u<s;)l[u]=o[t+u];u=-1;for(var c=Array(t+1);++u<t;)c[u]=o[u];return c[t]=a(l),e(i,this,c)}}return fa=n,fa}var da,vf;function yb(){if(vf)return da;vf=1;var e=xu(),r=Th(),n=Re(),i=r?function(t,a){return r(t,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return da=i,da}var ha,gf;function _b(){if(gf)return ha;gf=1;var e=800,r=16,n=Date.now;function i(t){var a=0,o=0;return function(){var u=n(),s=r-(u-o);if(o=u,s>0){if(++a>=e)return arguments[0]}else a=0;return t.apply(void 0,arguments)}}return ha=i,ha}var pa,mf;function fp(){if(mf)return pa;mf=1;var e=yb(),r=_b(),n=r(e);return pa=n,pa}var va,bf;function Ur(){if(bf)return va;bf=1;var e=Re(),r=lp(),n=fp();function i(t,a){return n(r(t,a,e),t+"")}return va=i,va}var ga,yf;function dp(){if(yf)return ga;yf=1;function e(r,n,i,t){for(var a=r.length,o=i+(t?1:-1);t?o--:++o<a;)if(n(r[o],o,r))return o;return-1}return ga=e,ga}var ma,_f;function xb(){if(_f)return ma;_f=1;function e(r){return r!==r}return ma=e,ma}var ba,xf;function wb(){if(xf)return ba;xf=1;function e(r,n,i){for(var t=i-1,a=r.length;++t<a;)if(r[t]===n)return t;return-1}return ba=e,ba}var ya,wf;function Eb(){if(wf)return ya;wf=1;var e=dp(),r=xb(),n=wb();function i(t,a,o){return a===a?n(t,a,o):e(t,r,o)}return ya=i,ya}var _a,Ef;function Ab(){if(Ef)return _a;Ef=1;var e=Eb();function r(n,i){var t=n==null?0:n.length;return!!t&&e(n,i,0)>-1}return _a=r,_a}var xa,Af;function qb(){if(Af)return xa;Af=1;function e(r,n,i){for(var t=-1,a=r==null?0:r.length;++t<a;)if(i(n,r[t]))return!0;return!1}return xa=e,xa}var wa,qf;function Cb(){if(qf)return wa;qf=1;function e(){}return wa=e,wa}var Ea,Cf;function Sb(){if(Cf)return Ea;Cf=1;var e=Dh(),r=Cb(),n=Au(),i=1/0,t=e&&1/n(new e([,-0]))[1]==i?function(a){return new e(a)}:r;return Ea=t,Ea}var Aa,Sf;function Rb(){if(Sf)return Aa;Sf=1;var e=Yh(),r=Ab(),n=qb(),i=Wh(),t=Sb(),a=Au(),o=200;function u(s,l,c){var f=-1,d=r,h=s.length,v=!0,g=[],m=g;if(c)v=!1,d=n;else if(h>=o){var y=l?null:t(s);if(y)return a(y);v=!1,d=i,m=new e}else m=l?[]:g;e:for(;++f<h;){var b=s[f],C=l?l(b):b;if(b=c||b!==0?b:0,v&&C===C){for(var q=m.length;q--;)if(m[q]===C)continue e;l&&m.push(C),g.push(b)}else d(m,C,c)||(m!==g&&m.push(C),g.push(b))}return g}return Aa=u,Aa}var qa,Rf;function hp(){if(Rf)return qa;Rf=1;var e=le(),r=ne();function n(i){return r(i)&&e(i)}return qa=n,qa}var Ca,Tf;function Tb(){if(Tf)return Ca;Tf=1;var e=Cu(),r=Ur(),n=Rb(),i=hp(),t=r(function(a){return n(e(a,1,i,!0))});return Ca=t,Ca}var Sa,If;function Ib(){if(If)return Sa;If=1;var e=Dr();function r(n,i){return e(i,function(t){return n[t]})}return Sa=r,Sa}var Ra,Of;function pp(){if(Of)return Ra;Of=1;var e=Ib(),r=xe();function n(i){return i==null?[]:e(i,r(i))}return Ra=n,Ra}var Ta,jf;function Q(){if(jf)return Ta;jf=1;var e;if(typeof fu=="function")try{e={clone:Mm(),constant:xu(),each:Vh(),filter:tp(),has:ap(),isArray:P(),isEmpty:ub(),isFunction:or(),isUndefined:op(),keys:xe(),map:sp(),reduce:cp(),size:vb(),transform:gb(),union:Tb(),values:pp()}}catch{}return e||(e=window._),Ta=e,Ta}var Ia,Nf;function Su(){if(Nf)return Ia;Nf=1;var e=Q();Ia=t;var r="\0",n="\0",i="";function t(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}t.prototype._nodeCount=0,t.prototype._edgeCount=0,t.prototype.isDirected=function(){return this._isDirected},t.prototype.isMultigraph=function(){return this._isMultigraph},t.prototype.isCompound=function(){return this._isCompound},t.prototype.setGraph=function(c){return this._label=c,this},t.prototype.graph=function(){return this._label},t.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},t.prototype.nodeCount=function(){return this._nodeCount},t.prototype.nodes=function(){return e.keys(this._nodes)},t.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},t.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},t.prototype.setNodes=function(c,f){var d=arguments,h=this;return e.each(c,function(v){d.length>1?h.setNode(v,f):h.setNode(v)}),this},t.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},t.prototype.node=function(c){return this._nodes[c]},t.prototype.hasNode=function(c){return e.has(this._nodes,c)},t.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},t.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var d=f;!e.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},t.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},t.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},t.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},t.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},t.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},t.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},t.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},t.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;e.each(this._nodes,function(g,m){c(m)&&f.setNode(m,g)}),e.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,d.edge(g))});var h={};function v(g){var m=d.parent(g);return m===void 0||f.hasNode(m)?(h[g]=m,m):m in h?h[m]:v(m)}return this._isCompound&&e.each(f.nodes(),function(g){f.setParent(g,v(g))}),f},t.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},t.prototype.edgeCount=function(){return this._edgeCount},t.prototype.edges=function(){return e.values(this._edgeObjs)},t.prototype.setPath=function(c,f){var d=this,h=arguments;return e.reduce(c,function(v,g){return h.length>1?d.setEdge(v,g,f):d.setEdge(v,g),g}),this},t.prototype.setEdge=function(){var c,f,d,h,v=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,f=g.w,d=g.name,arguments.length===2&&(h=arguments[1],v=!0)):(c=g,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],v=!0)),c=""+c,f=""+f,e.isUndefined(d)||(d=""+d);var m=u(this._isDirected,c,f,d);if(e.has(this._edgeLabels,m))return v&&(this._edgeLabels[m]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[m]=v?h:this._defaultEdgeLabelFn(c,f,d);var y=s(this._isDirected,c,f,d);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[m]=y,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][m]=y,this._out[c][m]=y,this._edgeCount++,this},t.prototype.edge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,c,f,d);return this._edgeLabels[h]},t.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,c,f,d);return e.has(this._edgeLabels,h)},t.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,c,f,d),v=this._edgeObjs[h];return v&&(c=v.v,f=v.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[f],c),o(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},t.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=e.values(d);return f?e.filter(h,function(v){return v.v===f}):h}},t.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=e.values(d);return f?e.filter(h,function(v){return v.w===f}):h}},t.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function o(c,f){--c[f]||delete c[f]}function u(c,f,d,h){var v=""+f,g=""+d;if(!c&&v>g){var m=v;v=g,g=m}return v+i+g+i+(e.isUndefined(h)?r:h)}function s(c,f,d,h){var v=""+f,g=""+d;if(!c&&v>g){var m=v;v=g,g=m}var y={v,w:g};return h&&(y.name=h),y}function l(c,f){return u(c,f.v,f.w,f.name)}return Ia}var Oa,kf;function Ob(){return kf||(kf=1,Oa="2.1.8"),Oa}var ja,Lf;function jb(){return Lf||(Lf=1,ja={Graph:Su(),version:Ob()}),ja}var Na,Ff;function Nb(){if(Ff)return Na;Ff=1;var e=Q(),r=Su();Na={write:n,read:a};function n(o){var u={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:i(o),edges:t(o)};return e.isUndefined(o.graph())||(u.value=e.clone(o.graph())),u}function i(o){return e.map(o.nodes(),function(u){var s=o.node(u),l=o.parent(u),c={v:u};return e.isUndefined(s)||(c.value=s),e.isUndefined(l)||(c.parent=l),c})}function t(o){return e.map(o.edges(),function(u){var s=o.edge(u),l={v:u.v,w:u.w};return e.isUndefined(u.name)||(l.name=u.name),e.isUndefined(s)||(l.value=s),l})}function a(o){var u=new r(o.options).setGraph(o.value);return e.each(o.nodes,function(s){u.setNode(s.v,s.value),s.parent&&u.setParent(s.v,s.parent)}),e.each(o.edges,function(s){u.setEdge({v:s.v,w:s.w,name:s.name},s.value)}),u}return Na}var ka,Mf;function kb(){if(Mf)return ka;Mf=1;var e=Q();ka=r;function r(n){var i={},t=[],a;function o(u){e.has(i,u)||(i[u]=!0,a.push(u),e.each(n.successors(u),o),e.each(n.predecessors(u),o))}return e.each(n.nodes(),function(u){a=[],o(u),a.length&&t.push(a)}),t}return ka}var La,Pf;function vp(){if(Pf)return La;Pf=1;var e=Q();La=r;function r(){this._arr=[],this._keyIndices={}}return r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(n){return n.key})},r.prototype.has=function(n){return e.has(this._keyIndices,n)},r.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},r.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(n,i){var t=this._keyIndices;if(n=String(n),!e.has(t,n)){var a=this._arr,o=a.length;return t[n]=o,a.push({key:n,priority:i}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},r.prototype.decrease=function(n,i){var t=this._keyIndices[n];if(i>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[t].priority+" New: "+i);this._arr[t].priority=i,this._decrease(t)},r.prototype._heapify=function(n){var i=this._arr,t=2*n,a=t+1,o=n;t<i.length&&(o=i[t].priority<i[o].priority?t:o,a<i.length&&(o=i[a].priority<i[o].priority?a:o),o!==n&&(this._swap(n,o),this._heapify(o)))},r.prototype._decrease=function(n){for(var i=this._arr,t=i[n].priority,a;n!==0&&(a=n>>1,!(i[a].priority<t));)this._swap(n,a),n=a},r.prototype._swap=function(n,i){var t=this._arr,a=this._keyIndices,o=t[n],u=t[i];t[n]=u,t[i]=o,a[u.key]=n,a[o.key]=i},La}var Fa,Df;function gp(){if(Df)return Fa;Df=1;var e=Q(),r=vp();Fa=i;var n=e.constant(1);function i(a,o,u,s){return t(a,String(o),u||n,s||function(l){return a.outEdges(l)})}function t(a,o,u,s){var l={},c=new r,f,d,h=function(v){var g=v.v!==f?v.v:v.w,m=l[g],y=u(v),b=d.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);b<m.distance&&(m.distance=b,m.predecessor=f,c.decrease(g,b))};for(a.nodes().forEach(function(v){var g=v===o?0:Number.POSITIVE_INFINITY;l[v]={distance:g},c.add(v,g)});c.size()>0&&(f=c.removeMin(),d=l[f],d.distance!==Number.POSITIVE_INFINITY);)s(f).forEach(h);return l}return Fa}var Ma,Bf;function Lb(){if(Bf)return Ma;Bf=1;var e=gp(),r=Q();Ma=n;function n(i,t,a){return r.transform(i.nodes(),function(o,u){o[u]=e(i,u,t,a)},{})}return Ma}var Pa,Gf;function mp(){if(Gf)return Pa;Gf=1;var e=Q();Pa=r;function r(n){var i=0,t=[],a={},o=[];function u(s){var l=a[s]={onStack:!0,lowlink:i,index:i++};if(t.push(s),n.successors(s).forEach(function(d){e.has(a,d)?a[d].onStack&&(l.lowlink=Math.min(l.lowlink,a[d].index)):(u(d),l.lowlink=Math.min(l.lowlink,a[d].lowlink))}),l.lowlink===l.index){var c=[],f;do f=t.pop(),a[f].onStack=!1,c.push(f);while(s!==f);o.push(c)}}return n.nodes().forEach(function(s){e.has(a,s)||u(s)}),o}return Pa}var Da,Uf;function Fb(){if(Uf)return Da;Uf=1;var e=Q(),r=mp();Da=n;function n(i){return e.filter(r(i),function(t){return t.length>1||t.length===1&&i.hasEdge(t[0],t[0])})}return Da}var Ba,Hf;function Mb(){if(Hf)return Ba;Hf=1;var e=Q();Ba=n;var r=e.constant(1);function n(t,a,o){return i(t,a||r,o||function(u){return t.outEdges(u)})}function i(t,a,o){var u={},s=t.nodes();return s.forEach(function(l){u[l]={},u[l][l]={distance:0},s.forEach(function(c){l!==c&&(u[l][c]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(c){var f=c.v===l?c.w:c.v,d=a(c);u[l][f]={distance:d,predecessor:l}})}),s.forEach(function(l){var c=u[l];s.forEach(function(f){var d=u[f];s.forEach(function(h){var v=d[l],g=c[h],m=d[h],y=v.distance+g.distance;y<m.distance&&(m.distance=y,m.predecessor=g.predecessor)})})}),u}return Ba}var Ga,$f;function bp(){if($f)return Ga;$f=1;var e=Q();Ga=r,r.CycleException=n;function r(i){var t={},a={},o=[];function u(s){if(e.has(a,s))throw new n;e.has(t,s)||(a[s]=!0,t[s]=!0,e.each(i.predecessors(s),u),delete a[s],o.push(s))}if(e.each(i.sinks(),u),e.size(t)!==i.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Ga}var Ua,zf;function Pb(){if(zf)return Ua;zf=1;var e=bp();Ua=r;function r(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Ua}var Ha,Kf;function yp(){if(Kf)return Ha;Kf=1;var e=Q();Ha=r;function r(i,t,a){e.isArray(t)||(t=[t]);var o=(i.isDirected()?i.successors:i.neighbors).bind(i),u=[],s={};return e.each(t,function(l){if(!i.hasNode(l))throw new Error("Graph does not have node: "+l);n(i,l,a==="post",s,o,u)}),u}function n(i,t,a,o,u,s){e.has(o,t)||(o[t]=!0,a||s.push(t),e.each(u(t),function(l){n(i,l,a,o,u,s)}),a&&s.push(t))}return Ha}var $a,Vf;function Db(){if(Vf)return $a;Vf=1;var e=yp();$a=r;function r(n,i){return e(n,i,"post")}return $a}var za,Yf;function Bb(){if(Yf)return za;Yf=1;var e=yp();za=r;function r(n,i){return e(n,i,"pre")}return za}var Ka,Wf;function Gb(){if(Wf)return Ka;Wf=1;var e=Q(),r=Su(),n=vp();Ka=i;function i(t,a){var o=new r,u={},s=new n,l;function c(d){var h=d.v===l?d.w:d.v,v=s.priority(h);if(v!==void 0){var g=a(d);g<v&&(u[h]=l,s.decrease(h,g))}}if(t.nodeCount()===0)return o;e.each(t.nodes(),function(d){s.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),s.decrease(t.nodes()[0],0);for(var f=!1;s.size()>0;){if(l=s.removeMin(),e.has(u,l))o.setEdge(l,u[l]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(l).forEach(c)}return o}return Ka}var Va,Qf;function Ub(){return Qf||(Qf=1,Va={components:kb(),dijkstra:gp(),dijkstraAll:Lb(),findCycles:Fb(),floydWarshall:Mb(),isAcyclic:Pb(),postorder:Db(),preorder:Bb(),prim:Gb(),tarjan:mp(),topsort:bp()}),Va}var Ya,Xf;function Hb(){if(Xf)return Ya;Xf=1;var e=jb();return Ya={Graph:e.Graph,json:Nb(),alg:Ub(),version:e.version},Ya}var br;if(typeof fu=="function")try{br=Hb()}catch{}br||(br=window.graphlib);var Z=br,Wa,Zf;function $b(){if(Zf)return Wa;Zf=1;var e=$h(),r=1,n=4;function i(t){return e(t,r|n)}return Wa=i,Wa}var Qa,Jf;function Hr(){if(Jf)return Qa;Jf=1;var e=Ue(),r=le(),n=kr(),i=W();function t(a,o,u){if(!i(u))return!1;var s=typeof o;return(s=="number"?r(u)&&n(o,u.length):s=="string"&&o in u)?e(u[o],a):!1}return Qa=t,Qa}var Xa,ed;function zb(){if(ed)return Xa;ed=1;var e=Ur(),r=Ue(),n=Hr(),i=Se(),t=Object.prototype,a=t.hasOwnProperty,o=e(function(u,s){u=Object(u);var l=-1,c=s.length,f=c>2?s[2]:void 0;for(f&&n(s[0],s[1],f)&&(c=1);++l<c;)for(var d=s[l],h=i(d),v=-1,g=h.length;++v<g;){var m=h[v],y=u[m];(y===void 0||r(y,t[m])&&!a.call(u,m))&&(u[m]=d[m])}return u});return Xa=o,Xa}var Za,rd;function Kb(){if(rd)return Za;rd=1;var e=fe(),r=le(),n=xe();function i(t){return function(a,o,u){var s=Object(a);if(!r(a)){var l=e(o,3);a=n(a),o=function(f){return l(s[f],f,s)}}var c=t(a,o,u);return c>-1?s[l?a[c]:c]:void 0}}return Za=i,Za}var Ja,nd;function Vb(){if(nd)return Ja;nd=1;var e=/\s/;function r(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return Ja=r,Ja}var eo,id;function Yb(){if(id)return eo;id=1;var e=Vb(),r=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return eo=n,eo}var ro,td;function Wb(){if(td)return ro;td=1;var e=Yb(),r=W(),n=Ke(),i=NaN,t=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function s(l){if(typeof l=="number")return l;if(n(l))return i;if(r(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=r(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=a.test(l);return f||o.test(l)?u(l.slice(2),f?2:8):t.test(l)?i:+l}return ro=s,ro}var no,ad;function _p(){if(ad)return no;ad=1;var e=Wb(),r=1/0,n=17976931348623157e292;function i(t){if(!t)return t===0?t:0;if(t=e(t),t===r||t===-r){var a=t<0?-1:1;return a*n}return t===t?t:0}return no=i,no}var io,od;function Qb(){if(od)return io;od=1;var e=_p();function r(n){var i=e(n),t=i%1;return i===i?t?i-t:i:0}return io=r,io}var to,ud;function Xb(){if(ud)return to;ud=1;var e=dp(),r=fe(),n=Qb(),i=Math.max;function t(a,o,u){var s=a==null?0:a.length;if(!s)return-1;var l=u==null?0:n(u);return l<0&&(l=i(s+l,0)),e(a,r(o,3),l)}return to=t,to}var ao,sd;function Zb(){if(sd)return ao;sd=1;var e=Kb(),r=Xb(),n=e(r);return ao=n,ao}var oo,cd;function xp(){if(cd)return oo;cd=1;var e=Cu();function r(n){var i=n==null?0:n.length;return i?e(n,1):[]}return oo=r,oo}var uo,ld;function Jb(){if(ld)return uo;ld=1;var e=wu(),r=zh(),n=Se();function i(t,a){return t==null?t:e(t,r(a),n)}return uo=i,uo}var so,fd;function ey(){if(fd)return so;fd=1;function e(r){var n=r==null?0:r.length;return n?r[n-1]:void 0}return so=e,so}var co,dd;function ry(){if(dd)return co;dd=1;var e=jr(),r=Eu(),n=fe();function i(t,a){var o={};return a=n(a,3),r(t,function(u,s,l){e(o,s,a(u,s,l))}),o}return co=i,co}var lo,hd;function Ru(){if(hd)return lo;hd=1;var e=Ke();function r(n,i,t){for(var a=-1,o=n.length;++a<o;){var u=n[a],s=i(u);if(s!=null&&(l===void 0?s===s&&!e(s):t(s,l)))var l=s,c=u}return c}return lo=r,lo}var fo,pd;function ny(){if(pd)return fo;pd=1;function e(r,n){return r>n}return fo=e,fo}var ho,vd;function iy(){if(vd)return ho;vd=1;var e=Ru(),r=ny(),n=Re();function i(t){return t&&t.length?e(t,n,r):void 0}return ho=i,ho}var po,gd;function wp(){if(gd)return po;gd=1;var e=jr(),r=Ue();function n(i,t,a){(a!==void 0&&!r(i[t],a)||a===void 0&&!(t in i))&&e(i,t,a)}return po=n,po}var vo,md;function ty(){if(md)return vo;md=1;var e=qe(),r=Mr(),n=ne(),i="[object Object]",t=Function.prototype,a=Object.prototype,o=t.toString,u=a.hasOwnProperty,s=o.call(Object);function l(c){if(!n(c)||e(c)!=i)return!1;var f=r(c);if(f===null)return!0;var d=u.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==s}return vo=l,vo}var go,bd;function Ep(){if(bd)return go;bd=1;function e(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}return go=e,go}var mo,yd;function ay(){if(yd)return mo;yd=1;var e=ur(),r=Se();function n(i){return e(i,r(i))}return mo=n,mo}var bo,_d;function oy(){if(_d)return bo;_d=1;var e=wp(),r=jh(),n=Gh(),i=Nh(),t=Hh(),a=sr(),o=P(),u=hp(),s=$e(),l=or(),c=W(),f=ty(),d=cr(),h=Ep(),v=ay();function g(m,y,b,C,q,I,w){var x=h(m,b),R=h(y,b),O=w.get(R);if(O){e(m,b,O);return}var N=I?I(x,R,b+"",m,y,w):void 0,A=N===void 0;if(A){var F=o(R),G=!F&&s(R),ie=!F&&!G&&d(R);N=R,F||G||ie?o(x)?N=x:u(x)?N=i(x):G?(A=!1,N=r(R,!0)):ie?(A=!1,N=n(R,!0)):N=[]:f(R)||a(R)?(N=x,a(x)?N=v(x):(!c(x)||l(x))&&(N=t(R))):A=!1}A&&(w.set(R,N),q(N,R,C,I,w),w.delete(R)),e(m,b,N)}return bo=g,bo}var yo,xd;function uy(){if(xd)return yo;xd=1;var e=Or(),r=wp(),n=wu(),i=oy(),t=W(),a=Se(),o=Ep();function u(s,l,c,f,d){s!==l&&n(l,function(h,v){if(d||(d=new e),t(h))i(s,l,v,c,u,f,d);else{var g=f?f(o(s,v),h,v+"",s,l,d):void 0;g===void 0&&(g=h),r(s,v,g)}},a)}return yo=u,yo}var _o,wd;function sy(){if(wd)return _o;wd=1;var e=Ur(),r=Hr();function n(i){return e(function(t,a){var o=-1,u=a.length,s=u>1?a[u-1]:void 0,l=u>2?a[2]:void 0;for(s=i.length>3&&typeof s=="function"?(u--,s):void 0,l&&r(a[0],a[1],l)&&(s=u<3?void 0:s,u=1),t=Object(t);++o<u;){var c=a[o];c&&i(t,c,o,s)}return t})}return _o=n,_o}var xo,Ed;function cy(){if(Ed)return xo;Ed=1;var e=uy(),r=sy(),n=r(function(i,t,a){e(i,t,a)});return xo=n,xo}var wo,Ad;function Ap(){if(Ad)return wo;Ad=1;function e(r,n){return r<n}return wo=e,wo}var Eo,qd;function ly(){if(qd)return Eo;qd=1;var e=Ru(),r=Ap(),n=Re();function i(t){return t&&t.length?e(t,n,r):void 0}return Eo=i,Eo}var Ao,Cd;function fy(){if(Cd)return Ao;Cd=1;var e=Ru(),r=fe(),n=Ap();function i(t,a){return t&&t.length?e(t,r(a,2),n):void 0}return Ao=i,Ao}var qo,Sd;function dy(){if(Sd)return qo;Sd=1;var e=X(),r=function(){return e.Date.now()};return qo=r,qo}var Co,Rd;function hy(){if(Rd)return Co;Rd=1;var e=Nr(),r=Br(),n=kr(),i=W(),t=lr();function a(o,u,s,l){if(!i(o))return o;u=r(u,o);for(var c=-1,f=u.length,d=f-1,h=o;h!=null&&++c<f;){var v=t(u[c]),g=s;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(c!=d){var m=h[v];g=l?l(m,v,h):void 0,g===void 0&&(g=i(m)?m:n(u[c+1])?[]:{})}e(h,v,g),h=h[v]}return o}return Co=a,Co}var So,Td;function py(){if(Td)return So;Td=1;var e=Gr(),r=hy(),n=Br();function i(t,a,o){for(var u=-1,s=a.length,l={};++u<s;){var c=a[u],f=e(t,c);o(f,c)&&r(l,n(c,t),f)}return l}return So=i,So}var Ro,Id;function vy(){if(Id)return Ro;Id=1;var e=py(),r=np();function n(i,t){return e(i,t,function(a,o){return r(i,o)})}return Ro=n,Ro}var To,Od;function gy(){if(Od)return To;Od=1;var e=xp(),r=lp(),n=fp();function i(t){return n(r(t,void 0,e),t+"")}return To=i,To}var Io,jd;function my(){if(jd)return Io;jd=1;var e=vy(),r=gy(),n=r(function(i,t){return i==null?{}:e(i,t)});return Io=n,Io}var Oo,Nd;function by(){if(Nd)return Oo;Nd=1;var e=Math.ceil,r=Math.max;function n(i,t,a,o){for(var u=-1,s=r(e((t-i)/(a||1)),0),l=Array(s);s--;)l[o?s:++u]=i,i+=a;return l}return Oo=n,Oo}var jo,kd;function yy(){if(kd)return jo;kd=1;var e=by(),r=Hr(),n=_p();function i(t){return function(a,o,u){return u&&typeof u!="number"&&r(a,o,u)&&(o=u=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),u=u===void 0?a<o?1:-1:n(u),e(a,o,u,t)}}return jo=i,jo}var No,Ld;function _y(){if(Ld)return No;Ld=1;var e=yy(),r=e();return No=r,No}var ko,Fd;function xy(){if(Fd)return ko;Fd=1;function e(r,n){var i=r.length;for(r.sort(n);i--;)r[i]=r[i].value;return r}return ko=e,ko}var Lo,Md;function wy(){if(Md)return Lo;Md=1;var e=Ke();function r(n,i){if(n!==i){var t=n!==void 0,a=n===null,o=n===n,u=e(n),s=i!==void 0,l=i===null,c=i===i,f=e(i);if(!l&&!f&&!u&&n>i||u&&s&&c&&!l&&!f||a&&s&&c||!t&&c||!o)return 1;if(!a&&!u&&!f&&n<i||f&&t&&o&&!a&&!u||l&&t&&o||!s&&o||!c)return-1}return 0}return Lo=r,Lo}var Fo,Pd;function Ey(){if(Pd)return Fo;Pd=1;var e=wy();function r(n,i,t){for(var a=-1,o=n.criteria,u=i.criteria,s=o.length,l=t.length;++a<s;){var c=e(o[a],u[a]);if(c){if(a>=l)return c;var f=t[a];return c*(f=="desc"?-1:1)}}return n.index-i.index}return Fo=r,Fo}var Mo,Dd;function Ay(){if(Dd)return Mo;Dd=1;var e=Dr(),r=Gr(),n=fe(),i=up(),t=xy(),a=Lr(),o=Ey(),u=Re(),s=P();function l(c,f,d){f.length?f=e(f,function(g){return s(g)?function(m){return r(m,g.length===1?g[0]:g)}:g}):f=[u];var h=-1;f=e(f,a(n));var v=i(c,function(g,m,y){var b=e(f,function(C){return C(g)});return{criteria:b,index:++h,value:g}});return t(v,function(g,m){return o(g,m,d)})}return Mo=l,Mo}var Po,Bd;function qy(){if(Bd)return Po;Bd=1;var e=Cu(),r=Ay(),n=Ur(),i=Hr(),t=n(function(a,o){if(a==null)return[];var u=o.length;return u>1&&i(a,o[0],o[1])?o=[]:u>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),r(a,e(o,1),[])});return Po=t,Po}var Do,Gd;function Cy(){if(Gd)return Do;Gd=1;var e=ep(),r=0;function n(i){var t=++r;return e(i)+t}return Do=n,Do}var Bo,Ud;function Sy(){if(Ud)return Bo;Ud=1;function e(r,n,i){for(var t=-1,a=r.length,o=n.length,u={};++t<a;){var s=t<o?n[t]:void 0;i(u,r[t],s)}return u}return Bo=e,Bo}var Go,Hd;function Ry(){if(Hd)return Go;Hd=1;var e=Nr(),r=Sy();function n(i,t){return r(i||[],t||[],e)}return Go=n,Go}var yr;if(typeof fu=="function")try{yr={cloneDeep:$b(),constant:xu(),defaults:zb(),each:Vh(),filter:tp(),find:Zb(),flatten:xp(),forEach:Kh(),forIn:Jb(),has:ap(),isUndefined:op(),last:ey(),map:sp(),mapValues:ry(),max:iy(),merge:cy(),min:ly(),minBy:fy(),now:dy(),pick:my(),range:_y(),reduce:cp(),sortBy:qy(),uniqueId:Cy(),values:pp(),zipObject:Ry()}}catch{}yr||(yr=window._);var L=yr,Ty=$r;function $r(){var e={};e._next=e._prev=e,this._sentinel=e}$r.prototype.dequeue=function(){var e=this._sentinel,r=e._prev;if(r!==e)return qp(r),r};$r.prototype.enqueue=function(e){var r=this._sentinel;e._prev&&e._next&&qp(e),e._next=r._next,r._next._prev=e,r._next=e,e._prev=r};$r.prototype.toString=function(){for(var e=[],r=this._sentinel,n=r._prev;n!==r;)e.push(JSON.stringify(n,Iy)),n=n._prev;return"["+e.join(", ")+"]"};function qp(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Iy(e,r){if(e!=="_next"&&e!=="_prev")return r}var ae=L,Oy=Z.Graph,jy=Ty,Ny=Ly,ky=ae.constant(1);function Ly(e,r){if(e.nodeCount()<=1)return[];var n=My(e,r||ky),i=Fy(n.graph,n.buckets,n.zeroIdx);return ae.flatten(ae.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)}function Fy(e,r,n){for(var i=[],t=r[r.length-1],a=r[0],o;e.nodeCount();){for(;o=a.dequeue();)Uo(e,r,n,o);for(;o=t.dequeue();)Uo(e,r,n,o);if(e.nodeCount()){for(var u=r.length-2;u>0;--u)if(o=r[u].dequeue(),o){i=i.concat(Uo(e,r,n,o,!0));break}}}return i}function Uo(e,r,n,i,t){var a=t?[]:void 0;return ae.forEach(e.inEdges(i.v),function(o){var u=e.edge(o),s=e.node(o.v);t&&a.push({v:o.v,w:o.w}),s.out-=u,iu(r,n,s)}),ae.forEach(e.outEdges(i.v),function(o){var u=e.edge(o),s=o.w,l=e.node(s);l.in-=u,iu(r,n,l)}),e.removeNode(i.v),a}function My(e,r){var n=new Oy,i=0,t=0;ae.forEach(e.nodes(),function(u){n.setNode(u,{v:u,in:0,out:0})}),ae.forEach(e.edges(),function(u){var s=n.edge(u.v,u.w)||0,l=r(u),c=s+l;n.setEdge(u.v,u.w,c),t=Math.max(t,n.node(u.v).out+=l),i=Math.max(i,n.node(u.w).in+=l)});var a=ae.range(t+i+3).map(function(){return new jy}),o=i+1;return ae.forEach(n.nodes(),function(u){iu(a,o,n.node(u))}),{graph:n,buckets:a,zeroIdx:o}}function iu(e,r,n){n.out?n.in?e[n.out-n.in+r].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ee=L,Py=Ny,Dy={run:By,undo:Uy};function By(e){var r=e.graph().acyclicer==="greedy"?Py(e,n(e)):Gy(e);Ee.forEach(r,function(i){var t=e.edge(i);e.removeEdge(i),t.forwardName=i.name,t.reversed=!0,e.setEdge(i.w,i.v,t,Ee.uniqueId("rev"))});function n(i){return function(t){return i.edge(t).weight}}}function Gy(e){var r=[],n={},i={};function t(a){Ee.has(i,a)||(i[a]=!0,n[a]=!0,Ee.forEach(e.outEdges(a),function(o){Ee.has(n,o.w)?r.push(o):t(o.w)}),delete n[a])}return Ee.forEach(e.nodes(),t),r}function Uy(e){Ee.forEach(e.edges(),function(r){var n=e.edge(r);if(n.reversed){e.removeEdge(r);var i=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(r.w,r.v,n,i)}})}var T=L,Cp=Z.Graph,V={addDummyNode:Sp,simplify:Hy,asNonCompoundGraph:$y,successorWeights:zy,predecessorWeights:Ky,intersectRect:Vy,buildLayerMatrix:Yy,normalizeRanks:Wy,removeEmptyRanks:Qy,addBorderNode:Xy,maxRank:Rp,partition:Zy,time:Jy,notime:e_};function Sp(e,r,n,i){var t;do t=T.uniqueId(i);while(e.hasNode(t));return n.dummy=r,e.setNode(t,n),t}function Hy(e){var r=new Cp().setGraph(e.graph());return T.forEach(e.nodes(),function(n){r.setNode(n,e.node(n))}),T.forEach(e.edges(),function(n){var i=r.edge(n.v,n.w)||{weight:0,minlen:1},t=e.edge(n);r.setEdge(n.v,n.w,{weight:i.weight+t.weight,minlen:Math.max(i.minlen,t.minlen)})}),r}function $y(e){var r=new Cp({multigraph:e.isMultigraph()}).setGraph(e.graph());return T.forEach(e.nodes(),function(n){e.children(n).length||r.setNode(n,e.node(n))}),T.forEach(e.edges(),function(n){r.setEdge(n,e.edge(n))}),r}function zy(e){var r=T.map(e.nodes(),function(n){var i={};return T.forEach(e.outEdges(n),function(t){i[t.w]=(i[t.w]||0)+e.edge(t).weight}),i});return T.zipObject(e.nodes(),r)}function Ky(e){var r=T.map(e.nodes(),function(n){var i={};return T.forEach(e.inEdges(n),function(t){i[t.v]=(i[t.v]||0)+e.edge(t).weight}),i});return T.zipObject(e.nodes(),r)}function Vy(e,r){var n=e.x,i=e.y,t=r.x-n,a=r.y-i,o=e.width/2,u=e.height/2;if(!t&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var s,l;return Math.abs(a)*o>Math.abs(t)*u?(a<0&&(u=-u),s=u*t/a,l=u):(t<0&&(o=-o),s=o,l=o*a/t),{x:n+s,y:i+l}}function Yy(e){var r=T.map(T.range(Rp(e)+1),function(){return[]});return T.forEach(e.nodes(),function(n){var i=e.node(n),t=i.rank;T.isUndefined(t)||(r[t][i.order]=n)}),r}function Wy(e){var r=T.min(T.map(e.nodes(),function(n){return e.node(n).rank}));T.forEach(e.nodes(),function(n){var i=e.node(n);T.has(i,"rank")&&(i.rank-=r)})}function Qy(e){var r=T.min(T.map(e.nodes(),function(a){return e.node(a).rank})),n=[];T.forEach(e.nodes(),function(a){var o=e.node(a).rank-r;n[o]||(n[o]=[]),n[o].push(a)});var i=0,t=e.graph().nodeRankFactor;T.forEach(n,function(a,o){T.isUndefined(a)&&o%t!==0?--i:i&&T.forEach(a,function(u){e.node(u).rank+=i})})}function Xy(e,r,n,i){var t={width:0,height:0};return arguments.length>=4&&(t.rank=n,t.order=i),Sp(e,"border",t,r)}function Rp(e){return T.max(T.map(e.nodes(),function(r){var n=e.node(r).rank;if(!T.isUndefined(n))return n}))}function Zy(e,r){var n={lhs:[],rhs:[]};return T.forEach(e,function(i){r(i)?n.lhs.push(i):n.rhs.push(i)}),n}function Jy(e,r){var n=T.now();try{return r()}finally{console.log(e+" time: "+(T.now()-n)+"ms")}}function e_(e,r){return r()}var Tp=L,r_=V,n_={run:i_,undo:a_};function i_(e){e.graph().dummyChains=[],Tp.forEach(e.edges(),function(r){t_(e,r)})}function t_(e,r){var n=r.v,i=e.node(n).rank,t=r.w,a=e.node(t).rank,o=r.name,u=e.edge(r),s=u.labelRank;if(a!==i+1){e.removeEdge(r);var l,c,f;for(f=0,++i;i<a;++f,++i)u.points=[],c={width:0,height:0,edgeLabel:u,edgeObj:r,rank:i},l=r_.addDummyNode(e,"edge",c,"_d"),i===s&&(c.width=u.width,c.height=u.height,c.dummy="edge-label",c.labelpos=u.labelpos),e.setEdge(n,l,{weight:u.weight},o),f===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,t,{weight:u.weight},o)}}function a_(e){Tp.forEach(e.graph().dummyChains,function(r){var n=e.node(r),i=n.edgeLabel,t;for(e.setEdge(n.edgeObj,i);n.dummy;)t=e.successors(r)[0],e.removeNode(r),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),r=t,n=e.node(r)})}var gr=L,zr={longestPath:o_,slack:u_};function o_(e){var r={};function n(i){var t=e.node(i);if(gr.has(r,i))return t.rank;r[i]=!0;var a=gr.min(gr.map(e.outEdges(i),function(o){return n(o.w)-e.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),t.rank=a}gr.forEach(e.sources(),n)}function u_(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}var _r=L,s_=Z.Graph,xr=zr.slack,Ip=c_;function c_(e){var r=new s_({directed:!1}),n=e.nodes()[0],i=e.nodeCount();r.setNode(n,{});for(var t,a;l_(r,e)<i;)t=f_(r,e),a=r.hasNode(t.v)?xr(e,t):-xr(e,t),d_(r,e,a);return r}function l_(e,r){function n(i){_r.forEach(r.nodeEdges(i),function(t){var a=t.v,o=i===a?t.w:a;!e.hasNode(o)&&!xr(r,t)&&(e.setNode(o,{}),e.setEdge(i,o,{}),n(o))})}return _r.forEach(e.nodes(),n),e.nodeCount()}function f_(e,r){return _r.minBy(r.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return xr(r,n)})}function d_(e,r,n){_r.forEach(e.nodes(),function(i){r.node(i).rank+=n})}var se=L,h_=Ip,p_=zr.slack,v_=zr.longestPath,g_=Z.alg.preorder,m_=Z.alg.postorder,b_=V.simplify,y_=Te;Te.initLowLimValues=Iu;Te.initCutValues=Tu;Te.calcCutValue=Op;Te.leaveEdge=Np;Te.enterEdge=kp;Te.exchangeEdges=Lp;function Te(e){e=b_(e),v_(e);var r=h_(e);Iu(r),Tu(r,e);for(var n,i;n=Np(r);)i=kp(r,e,n),Lp(r,e,n,i)}function Tu(e,r){var n=m_(e,e.nodes());n=n.slice(0,n.length-1),se.forEach(n,function(i){__(e,r,i)})}function __(e,r,n){var i=e.node(n),t=i.parent;e.edge(n,t).cutvalue=Op(e,r,n)}function Op(e,r,n){var i=e.node(n),t=i.parent,a=!0,o=r.edge(n,t),u=0;return o||(a=!1,o=r.edge(t,n)),u=o.weight,se.forEach(r.nodeEdges(n),function(s){var l=s.v===n,c=l?s.w:s.v;if(c!==t){var f=l===a,d=r.edge(s).weight;if(u+=f?d:-d,w_(e,n,c)){var h=e.edge(n,c).cutvalue;u+=f?-h:h}}}),u}function Iu(e,r){arguments.length<2&&(r=e.nodes()[0]),jp(e,{},1,r)}function jp(e,r,n,i,t){var a=n,o=e.node(i);return r[i]=!0,se.forEach(e.neighbors(i),function(u){se.has(r,u)||(n=jp(e,r,n,u,i))}),o.low=a,o.lim=n++,t?o.parent=t:delete o.parent,n}function Np(e){return se.find(e.edges(),function(r){return e.edge(r).cutvalue<0})}function kp(e,r,n){var i=n.v,t=n.w;r.hasEdge(i,t)||(i=n.w,t=n.v);var a=e.node(i),o=e.node(t),u=a,s=!1;a.lim>o.lim&&(u=o,s=!0);var l=se.filter(r.edges(),function(c){return s===$d(e,e.node(c.v),u)&&s!==$d(e,e.node(c.w),u)});return se.minBy(l,function(c){return p_(r,c)})}function Lp(e,r,n,i){var t=n.v,a=n.w;e.removeEdge(t,a),e.setEdge(i.v,i.w,{}),Iu(e),Tu(e,r),x_(e,r)}function x_(e,r){var n=se.find(e.nodes(),function(t){return!r.node(t).parent}),i=g_(e,n);i=i.slice(1),se.forEach(i,function(t){var a=e.node(t).parent,o=r.edge(t,a),u=!1;o||(o=r.edge(a,t),u=!0),r.node(t).rank=r.node(a).rank+(u?o.minlen:-o.minlen)})}function w_(e,r,n){return e.hasEdge(r,n)}function $d(e,r,n){return n.low<=r.lim&&r.lim<=n.lim}var E_=zr,Fp=E_.longestPath,A_=Ip,q_=y_,C_=S_;function S_(e){switch(e.graph().ranker){case"network-simplex":zd(e);break;case"tight-tree":T_(e);break;case"longest-path":R_(e);break;default:zd(e)}}var R_=Fp;function T_(e){Fp(e),A_(e)}function zd(e){q_(e)}var tu=L,I_=O_;function O_(e){var r=N_(e);tu.forEach(e.graph().dummyChains,function(n){for(var i=e.node(n),t=i.edgeObj,a=j_(e,r,t.v,t.w),o=a.path,u=a.lca,s=0,l=o[s],c=!0;n!==t.w;){if(i=e.node(n),c){for(;(l=o[s])!==u&&e.node(l).maxRank<i.rank;)s++;l===u&&(c=!1)}if(!c){for(;s<o.length-1&&e.node(l=o[s+1]).minRank<=i.rank;)s++;l=o[s]}e.setParent(n,l),n=e.successors(n)[0]}})}function j_(e,r,n,i){var t=[],a=[],o=Math.min(r[n].low,r[i].low),u=Math.max(r[n].lim,r[i].lim),s,l;s=n;do s=e.parent(s),t.push(s);while(s&&(r[s].low>o||u>r[s].lim));for(l=s,s=i;(s=e.parent(s))!==l;)a.push(s);return{path:t.concat(a.reverse()),lca:l}}function N_(e){var r={},n=0;function i(t){var a=n;tu.forEach(e.children(t),i),r[t]={low:a,lim:n++}}return tu.forEach(e.children(),i),r}var oe=L,au=V,k_={run:L_,cleanup:P_};function L_(e){var r=au.addDummyNode(e,"root",{},"_root"),n=F_(e),i=oe.max(oe.values(n))-1,t=2*i+1;e.graph().nestingRoot=r,oe.forEach(e.edges(),function(o){e.edge(o).minlen*=t});var a=M_(e)+1;oe.forEach(e.children(),function(o){Mp(e,r,t,a,i,n,o)}),e.graph().nodeRankFactor=t}function Mp(e,r,n,i,t,a,o){var u=e.children(o);if(!u.length){o!==r&&e.setEdge(r,o,{weight:0,minlen:n});return}var s=au.addBorderNode(e,"_bt"),l=au.addBorderNode(e,"_bb"),c=e.node(o);e.setParent(s,o),c.borderTop=s,e.setParent(l,o),c.borderBottom=l,oe.forEach(u,function(f){Mp(e,r,n,i,t,a,f);var d=e.node(f),h=d.borderTop?d.borderTop:f,v=d.borderBottom?d.borderBottom:f,g=d.borderTop?i:2*i,m=h!==v?1:t-a[o]+1;e.setEdge(s,h,{weight:g,minlen:m,nestingEdge:!0}),e.setEdge(v,l,{weight:g,minlen:m,nestingEdge:!0})}),e.parent(o)||e.setEdge(r,s,{weight:0,minlen:t+a[o]})}function F_(e){var r={};function n(i,t){var a=e.children(i);a&&a.length&&oe.forEach(a,function(o){n(o,t+1)}),r[i]=t}return oe.forEach(e.children(),function(i){n(i,1)}),r}function M_(e){return oe.reduce(e.edges(),function(r,n){return r+e.edge(n).weight},0)}function P_(e){var r=e.graph();e.removeNode(r.nestingRoot),delete r.nestingRoot,oe.forEach(e.edges(),function(n){var i=e.edge(n);i.nestingEdge&&e.removeEdge(n)})}var Ho=L,D_=V,B_=G_;function G_(e){function r(n){var i=e.children(n),t=e.node(n);if(i.length&&Ho.forEach(i,r),Ho.has(t,"minRank")){t.borderLeft=[],t.borderRight=[];for(var a=t.minRank,o=t.maxRank+1;a<o;++a)Kd(e,"borderLeft","_bl",n,t,a),Kd(e,"borderRight","_br",n,t,a)}}Ho.forEach(e.children(),r)}function Kd(e,r,n,i,t,a){var o={width:0,height:0,rank:a,borderType:r},u=t[r][a-1],s=D_.addDummyNode(e,"border",o,n);t[r][a]=s,e.setParent(s,i),u&&e.setEdge(u,s,{weight:1})}var J=L,U_={adjust:H_,undo:$_};function H_(e){var r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&Pp(e)}function $_(e){var r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&z_(e),(r==="lr"||r==="rl")&&(K_(e),Pp(e))}function Pp(e){J.forEach(e.nodes(),function(r){Vd(e.node(r))}),J.forEach(e.edges(),function(r){Vd(e.edge(r))})}function Vd(e){var r=e.width;e.width=e.height,e.height=r}function z_(e){J.forEach(e.nodes(),function(r){$o(e.node(r))}),J.forEach(e.edges(),function(r){var n=e.edge(r);J.forEach(n.points,$o),J.has(n,"y")&&$o(n)})}function $o(e){e.y=-e.y}function K_(e){J.forEach(e.nodes(),function(r){zo(e.node(r))}),J.forEach(e.edges(),function(r){var n=e.edge(r);J.forEach(n.points,zo),J.has(n,"x")&&zo(n)})}function zo(e){var r=e.x;e.x=e.y,e.y=r}var te=L,V_=Y_;function Y_(e){var r={},n=te.filter(e.nodes(),function(u){return!e.children(u).length}),i=te.max(te.map(n,function(u){return e.node(u).rank})),t=te.map(te.range(i+1),function(){return[]});function a(u){if(!te.has(r,u)){r[u]=!0;var s=e.node(u);t[s.rank].push(u),te.forEach(e.successors(u),a)}}var o=te.sortBy(n,function(u){return e.node(u).rank});return te.forEach(o,a),t}var pe=L,W_=Q_;function Q_(e,r){for(var n=0,i=1;i<r.length;++i)n+=X_(e,r[i-1],r[i]);return n}function X_(e,r,n){for(var i=pe.zipObject(n,pe.map(n,function(l,c){return c})),t=pe.flatten(pe.map(r,function(l){return pe.sortBy(pe.map(e.outEdges(l),function(c){return{pos:i[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var o=2*a-1;a-=1;var u=pe.map(new Array(o),function(){return 0}),s=0;return pe.forEach(t.forEach(function(l){var c=l.pos+a;u[c]+=l.weight;for(var f=0;c>0;)c%2&&(f+=u[c+1]),c=c-1>>1,u[c]+=l.weight;s+=l.weight*f})),s}var Yd=L,Z_=J_;function J_(e,r){return Yd.map(r,function(n){var i=e.inEdges(n);if(i.length){var t=Yd.reduce(i,function(a,o){var u=e.edge(o),s=e.node(o.v);return{sum:a.sum+u.weight*s.order,weight:a.weight+u.weight}},{sum:0,weight:0});return{v:n,barycenter:t.sum/t.weight,weight:t.weight}}else return{v:n}})}var Y=L,e1=r1;function r1(e,r){var n={};Y.forEach(e,function(t,a){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:a};Y.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)}),Y.forEach(r.edges(),function(t){var a=n[t.v],o=n[t.w];!Y.isUndefined(a)&&!Y.isUndefined(o)&&(o.indegree++,a.out.push(n[t.w]))});var i=Y.filter(n,function(t){return!t.indegree});return n1(i)}function n1(e){var r=[];function n(a){return function(o){o.merged||(Y.isUndefined(o.barycenter)||Y.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&i1(a,o)}}function i(a){return function(o){o.in.push(a),--o.indegree===0&&e.push(o)}}for(;e.length;){var t=e.pop();r.push(t),Y.forEach(t.in.reverse(),n(t)),Y.forEach(t.out,i(t))}return Y.map(Y.filter(r,function(a){return!a.merged}),function(a){return Y.pick(a,["vs","i","barycenter","weight"])})}function i1(e,r){var n=0,i=0;e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),e.vs=r.vs.concat(e.vs),e.barycenter=n/i,e.weight=i,e.i=Math.min(r.i,e.i),r.merged=!0}var Qe=L,t1=V,a1=o1;function o1(e,r){var n=t1.partition(e,function(c){return Qe.has(c,"barycenter")}),i=n.lhs,t=Qe.sortBy(n.rhs,function(c){return-c.i}),a=[],o=0,u=0,s=0;i.sort(u1(!!r)),s=Wd(a,t,s),Qe.forEach(i,function(c){s+=c.vs.length,a.push(c.vs),o+=c.barycenter*c.weight,u+=c.weight,s=Wd(a,t,s)});var l={vs:Qe.flatten(a,!0)};return u&&(l.barycenter=o/u,l.weight=u),l}function Wd(e,r,n){for(var i;r.length&&(i=Qe.last(r)).i<=n;)r.pop(),e.push(i.vs),n++;return n}function u1(e){return function(r,n){return r.barycenter<n.barycenter?-1:r.barycenter>n.barycenter?1:e?n.i-r.i:r.i-n.i}}var ve=L,s1=Z_,c1=e1,l1=a1,f1=Dp;function Dp(e,r,n,i){var t=e.children(r),a=e.node(r),o=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,s={};o&&(t=ve.filter(t,function(v){return v!==o&&v!==u}));var l=s1(e,t);ve.forEach(l,function(v){if(e.children(v.v).length){var g=Dp(e,v.v,n,i);s[v.v]=g,ve.has(g,"barycenter")&&h1(v,g)}});var c=c1(l,n);d1(c,s);var f=l1(c,i);if(o&&(f.vs=ve.flatten([o,f.vs,u],!0),e.predecessors(o).length)){var d=e.node(e.predecessors(o)[0]),h=e.node(e.predecessors(u)[0]);ve.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+h.order)/(f.weight+2),f.weight+=2}return f}function d1(e,r){ve.forEach(e,function(n){n.vs=ve.flatten(n.vs.map(function(i){return r[i]?r[i].vs:i}),!0)})}function h1(e,r){ve.isUndefined(e.barycenter)?(e.barycenter=r.barycenter,e.weight=r.weight):(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight)}var Xe=L,p1=Z.Graph,v1=g1;function g1(e,r,n){var i=m1(e),t=new p1({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(a){return e.node(a)});return Xe.forEach(e.nodes(),function(a){var o=e.node(a),u=e.parent(a);(o.rank===r||o.minRank<=r&&r<=o.maxRank)&&(t.setNode(a),t.setParent(a,u||i),Xe.forEach(e[n](a),function(s){var l=s.v===a?s.w:s.v,c=t.edge(l,a),f=Xe.isUndefined(c)?0:c.weight;t.setEdge(l,a,{weight:e.edge(s).weight+f})}),Xe.has(o,"minRank")&&t.setNode(a,{borderLeft:o.borderLeft[r],borderRight:o.borderRight[r]}))}),t}function m1(e){for(var r;e.hasNode(r=Xe.uniqueId("_root")););return r}var b1=L,y1=_1;function _1(e,r,n){var i={},t;b1.forEach(n,function(a){for(var o=e.parent(a),u,s;o;){if(u=e.parent(o),u?(s=i[u],i[u]=o):(s=t,t=o),s&&s!==o){r.setEdge(s,o);return}o=u}})}var me=L,x1=V_,w1=W_,E1=f1,A1=v1,q1=y1,C1=Z.Graph,Qd=V,S1=R1;function R1(e){var r=Qd.maxRank(e),n=Xd(e,me.range(1,r+1),"inEdges"),i=Xd(e,me.range(r-1,-1,-1),"outEdges"),t=x1(e);Zd(e,t);for(var a=Number.POSITIVE_INFINITY,o,u=0,s=0;s<4;++u,++s){T1(u%2?n:i,u%4>=2),t=Qd.buildLayerMatrix(e);var l=w1(e,t);l<a&&(s=0,o=me.cloneDeep(t),a=l)}Zd(e,o)}function Xd(e,r,n){return me.map(r,function(i){return A1(e,i,n)})}function T1(e,r){var n=new C1;me.forEach(e,function(i){var t=i.graph().root,a=E1(i,t,n,r);me.forEach(a.vs,function(o,u){i.node(o).order=u}),q1(i,n,a.vs)})}function Zd(e,r){me.forEach(r,function(n){me.forEach(n,function(i,t){e.node(i).order=t})})}var E=L,I1=Z.Graph,O1=V,j1={positionX:H1};function N1(e,r){var n={};function i(t,a){var o=0,u=0,s=t.length,l=E.last(a);return E.forEach(a,function(c,f){var d=L1(e,c),h=d?e.node(d).order:s;(d||c===l)&&(E.forEach(a.slice(u,f+1),function(v){E.forEach(e.predecessors(v),function(g){var m=e.node(g),y=m.order;(y<o||h<y)&&!(m.dummy&&e.node(v).dummy)&&Bp(n,g,v)})}),u=f+1,o=h)}),a}return E.reduce(r,i),n}function k1(e,r){var n={};function i(a,o,u,s,l){var c;E.forEach(E.range(o,u),function(f){c=a[f],e.node(c).dummy&&E.forEach(e.predecessors(c),function(d){var h=e.node(d);h.dummy&&(h.order<s||h.order>l)&&Bp(n,d,c)})})}function t(a,o){var u=-1,s,l=0;return E.forEach(o,function(c,f){if(e.node(c).dummy==="border"){var d=e.predecessors(c);d.length&&(s=e.node(d[0]).order,i(o,l,f,u,s),l=f,u=s)}i(o,l,o.length,s,a.length)}),o}return E.reduce(r,t),n}function L1(e,r){if(e.node(r).dummy)return E.find(e.predecessors(r),function(n){return e.node(n).dummy})}function Bp(e,r,n){if(r>n){var i=r;r=n,n=i}var t=e[r];t||(e[r]=t={}),t[n]=!0}function F1(e,r,n){if(r>n){var i=r;r=n,n=i}return E.has(e[r],n)}function M1(e,r,n,i){var t={},a={},o={};return E.forEach(r,function(u){E.forEach(u,function(s,l){t[s]=s,a[s]=s,o[s]=l})}),E.forEach(r,function(u){var s=-1;E.forEach(u,function(l){var c=i(l);if(c.length){c=E.sortBy(c,function(g){return o[g]});for(var f=(c.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var v=c[d];a[l]===l&&s<o[v]&&!F1(n,l,v)&&(a[v]=l,a[l]=t[l]=t[v],s=o[v])}}})}),{root:t,align:a}}function P1(e,r,n,i,t){var a={},o=D1(e,r,n,t),u=t?"borderLeft":"borderRight";function s(f,d){for(var h=o.nodes(),v=h.pop(),g={};v;)g[v]?f(v):(g[v]=!0,h.push(v),h=h.concat(d(v))),v=h.pop()}function l(f){a[f]=o.inEdges(f).reduce(function(d,h){return Math.max(d,a[h.v]+o.edge(h))},0)}function c(f){var d=o.outEdges(f).reduce(function(v,g){return Math.min(v,a[g.w]-o.edge(g))},Number.POSITIVE_INFINITY),h=e.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==u&&(a[f]=Math.max(a[f],d))}return s(l,o.predecessors.bind(o)),s(c,o.successors.bind(o)),E.forEach(i,function(f){a[f]=a[n[f]]}),a}function D1(e,r,n,i){var t=new I1,a=e.graph(),o=$1(a.nodesep,a.edgesep,i);return E.forEach(r,function(u){var s;E.forEach(u,function(l){var c=n[l];if(t.setNode(c),s){var f=n[s],d=t.edge(f,c);t.setEdge(f,c,Math.max(o(e,l,s),d||0))}s=l})}),t}function B1(e,r){return E.minBy(E.values(r),function(n){var i=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY;return E.forIn(n,function(a,o){var u=z1(e,o)/2;i=Math.max(a+u,i),t=Math.min(a-u,t)}),i-t})}function G1(e,r){var n=E.values(r),i=E.min(n),t=E.max(n);E.forEach(["u","d"],function(a){E.forEach(["l","r"],function(o){var u=a+o,s=e[u],l;if(s!==r){var c=E.values(s);l=o==="l"?i-E.min(c):t-E.max(c),l&&(e[u]=E.mapValues(s,function(f){return f+l}))}})})}function U1(e,r){return E.mapValues(e.ul,function(n,i){if(r)return e[r.toLowerCase()][i];var t=E.sortBy(E.map(e,i));return(t[1]+t[2])/2})}function H1(e){var r=O1.buildLayerMatrix(e),n=E.merge(N1(e,r),k1(e,r)),i={},t;E.forEach(["u","d"],function(o){t=o==="u"?r:E.values(r).reverse(),E.forEach(["l","r"],function(u){u==="r"&&(t=E.map(t,function(f){return E.values(f).reverse()}));var s=(o==="u"?e.predecessors:e.successors).bind(e),l=M1(e,t,n,s),c=P1(e,t,l.root,l.align,u==="r");u==="r"&&(c=E.mapValues(c,function(f){return-f})),i[o+u]=c})});var a=B1(e,i);return G1(i,a),U1(i,e.graph().align)}function $1(e,r,n){return function(i,t,a){var o=i.node(t),u=i.node(a),s=0,l;if(s+=o.width/2,E.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=-o.width/2;break;case"r":l=o.width/2;break}if(l&&(s+=n?l:-l),l=0,s+=(o.dummy?r:e)/2,s+=(u.dummy?r:e)/2,s+=u.width/2,E.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":l=u.width/2;break;case"r":l=-u.width/2;break}return l&&(s+=n?l:-l),l=0,s}}function z1(e,r){return e.node(r).width}var Ze=L,Gp=V,K1=j1.positionX,V1=Y1;function Y1(e){e=Gp.asNonCompoundGraph(e),W1(e),Ze.forEach(K1(e),function(r,n){e.node(n).x=r})}function W1(e){var r=Gp.buildLayerMatrix(e),n=e.graph().ranksep,i=0;Ze.forEach(r,function(t){var a=Ze.max(Ze.map(t,function(o){return e.node(o).height}));Ze.forEach(t,function(o){e.node(o).y=i+a/2}),i+=a+n})}var S=L,Jd=Dy,eh=n_,Q1=C_,X1=V.normalizeRanks,Z1=I_,J1=V.removeEmptyRanks,rh=k_,e0=B_,nh=U_,r0=S1,n0=V1,ye=V,i0=Z.Graph,t0=a0;function a0(e,r){var n=r&&r.debugTiming?ye.time:ye.notime;n("layout",function(){var i=n("  buildLayoutGraph",function(){return g0(e)});n("  runLayout",function(){o0(i,n)}),n("  updateInputGraph",function(){u0(e,i)})})}function o0(e,r){r("    makeSpaceForEdgeLabels",function(){m0(e)}),r("    removeSelfEdges",function(){C0(e)}),r("    acyclic",function(){Jd.run(e)}),r("    nestingGraph.run",function(){rh.run(e)}),r("    rank",function(){Q1(ye.asNonCompoundGraph(e))}),r("    injectEdgeLabelProxies",function(){b0(e)}),r("    removeEmptyRanks",function(){J1(e)}),r("    nestingGraph.cleanup",function(){rh.cleanup(e)}),r("    normalizeRanks",function(){X1(e)}),r("    assignRankMinMax",function(){y0(e)}),r("    removeEdgeLabelProxies",function(){_0(e)}),r("    normalize.run",function(){eh.run(e)}),r("    parentDummyChains",function(){Z1(e)}),r("    addBorderSegments",function(){e0(e)}),r("    order",function(){r0(e)}),r("    insertSelfEdges",function(){S0(e)}),r("    adjustCoordinateSystem",function(){nh.adjust(e)}),r("    position",function(){n0(e)}),r("    positionSelfEdges",function(){R0(e)}),r("    removeBorderNodes",function(){q0(e)}),r("    normalize.undo",function(){eh.undo(e)}),r("    fixupEdgeLabelCoords",function(){E0(e)}),r("    undoCoordinateSystem",function(){nh.undo(e)}),r("    translateGraph",function(){x0(e)}),r("    assignNodeIntersects",function(){w0(e)}),r("    reversePoints",function(){A0(e)}),r("    acyclic.undo",function(){Jd.undo(e)})}function u0(e,r){S.forEach(e.nodes(),function(n){var i=e.node(n),t=r.node(n);i&&(i.x=t.x,i.y=t.y,r.children(n).length&&(i.width=t.width,i.height=t.height))}),S.forEach(e.edges(),function(n){var i=e.edge(n),t=r.edge(n);i.points=t.points,S.has(t,"x")&&(i.x=t.x,i.y=t.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height}var s0=["nodesep","edgesep","ranksep","marginx","marginy"],c0={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},l0=["acyclicer","ranker","rankdir","align"],f0=["width","height"],d0={width:0,height:0},h0=["minlen","weight","width","height","labeloffset"],p0={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v0=["labelpos"];function g0(e){var r=new i0({multigraph:!0,compound:!0}),n=Vo(e.graph());return r.setGraph(S.merge({},c0,Ko(n,s0),S.pick(n,l0))),S.forEach(e.nodes(),function(i){var t=Vo(e.node(i));r.setNode(i,S.defaults(Ko(t,f0),d0)),r.setParent(i,e.parent(i))}),S.forEach(e.edges(),function(i){var t=Vo(e.edge(i));r.setEdge(i,S.merge({},p0,Ko(t,h0),S.pick(t,v0)))}),r}function m0(e){var r=e.graph();r.ranksep/=2,S.forEach(e.edges(),function(n){var i=e.edge(n);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function b0(e){S.forEach(e.edges(),function(r){var n=e.edge(r);if(n.width&&n.height){var i=e.node(r.v),t=e.node(r.w),a={rank:(t.rank-i.rank)/2+i.rank,e:r};ye.addDummyNode(e,"edge-proxy",a,"_ep")}})}function y0(e){var r=0;S.forEach(e.nodes(),function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,r=S.max(r,i.maxRank))}),e.graph().maxRank=r}function _0(e){S.forEach(e.nodes(),function(r){var n=e.node(r);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(r))})}function x0(e){var r=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,t=0,a=e.graph(),o=a.marginx||0,u=a.marginy||0;function s(l){var c=l.x,f=l.y,d=l.width,h=l.height;r=Math.min(r,c-d/2),n=Math.max(n,c+d/2),i=Math.min(i,f-h/2),t=Math.max(t,f+h/2)}S.forEach(e.nodes(),function(l){s(e.node(l))}),S.forEach(e.edges(),function(l){var c=e.edge(l);S.has(c,"x")&&s(c)}),r-=o,i-=u,S.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=r,c.y-=i}),S.forEach(e.edges(),function(l){var c=e.edge(l);S.forEach(c.points,function(f){f.x-=r,f.y-=i}),S.has(c,"x")&&(c.x-=r),S.has(c,"y")&&(c.y-=i)}),a.width=n-r+o,a.height=t-i+u}function w0(e){S.forEach(e.edges(),function(r){var n=e.edge(r),i=e.node(r.v),t=e.node(r.w),a,o;n.points?(a=n.points[0],o=n.points[n.points.length-1]):(n.points=[],a=t,o=i),n.points.unshift(ye.intersectRect(i,a)),n.points.push(ye.intersectRect(t,o))})}function E0(e){S.forEach(e.edges(),function(r){var n=e.edge(r);if(S.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function A0(e){S.forEach(e.edges(),function(r){var n=e.edge(r);n.reversed&&n.points.reverse()})}function q0(e){S.forEach(e.nodes(),function(r){if(e.children(r).length){var n=e.node(r),i=e.node(n.borderTop),t=e.node(n.borderBottom),a=e.node(S.last(n.borderLeft)),o=e.node(S.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(t.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),S.forEach(e.nodes(),function(r){e.node(r).dummy==="border"&&e.removeNode(r)})}function C0(e){S.forEach(e.edges(),function(r){if(r.v===r.w){var n=e.node(r.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdge(r)}})}function S0(e){var r=ye.buildLayerMatrix(e);S.forEach(r,function(n){var i=0;S.forEach(n,function(t,a){var o=e.node(t);o.order=a+i,S.forEach(o.selfEdges,function(u){ye.addDummyNode(e,"selfedge",{width:u.label.width,height:u.label.height,rank:o.rank,order:a+ ++i,e:u.e,label:u.label},"_se")}),delete o.selfEdges})})}function R0(e){S.forEach(e.nodes(),function(r){var n=e.node(r);if(n.dummy==="selfedge"){var i=e.node(n.e.v),t=i.x+i.width/2,a=i.y,o=n.x-t,u=i.height/2;e.setEdge(n.e,n.label),e.removeNode(r),n.label.points=[{x:t+2*o/3,y:a-u},{x:t+5*o/6,y:a-u},{x:t+o,y:a},{x:t+5*o/6,y:a+u},{x:t+2*o/3,y:a+u}],n.label.x=n.x,n.label.y=n.y}})}function Ko(e,r){return S.mapValues(S.pick(e,r),Number)}function Vo(e){var r={};return S.forEach(e,function(n,i){r[i.toLowerCase()]=n}),r}var mr=L,T0=V,I0=Z.Graph,O0={debugOrdering:j0};function j0(e){var r=T0.buildLayerMatrix(e),n=new I0({compound:!0,multigraph:!0}).setGraph({});return mr.forEach(e.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+e.node(i).rank)}),mr.forEach(e.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),mr.forEach(r,function(i,t){var a="layer"+t;n.setNode(a,{rank:"same"}),mr.reduce(i,function(o,u){return n.setEdge(o,u,{style:"invis"}),u})}),n}var N0="0.8.5",k0={graphlib:Z,layout:t0,debug:O0,util:{time:V.time,notime:V.notime},version:N0};const ih=Zv(k0);function L0(){const e=ee.useCallback((i,t,a="TB")=>{const o=new ih.graphlib.Graph;o.setDefaultEdgeLabel(()=>({}));const u=250,s=150;return o.setGraph({rankdir:a,align:"UL",nodesep:100,ranksep:150,marginx:50,marginy:50}),i.forEach(c=>{o.setNode(c.id,{width:u,height:s})}),t.forEach(c=>{o.setEdge(c.source,c.target)}),ih.layout(o),i.map(c=>{const f=o.node(c.id);return{...c,position:{x:f.x-u/2,y:f.y-s/2}}})},[]),r=ee.useCallback((i,t)=>{const a=new Map(i.map(l=>[l.id,{...l}])),o=50,u=100,s=.01;for(let l=0;l<o;l++)i.forEach(c=>{i.forEach(f=>{if(c.id!==f.id){const d=f.position.x-c.position.x,h=f.position.y-c.position.y,v=Math.sqrt(d*d+h*h);if(v>0){const g=u*u/v,m=d/v*g*s,y=h/v*g*s,b=a.get(c.id);b.position.x-=m,b.position.y-=y}}})}),t.forEach(c=>{const f=a.get(c.source),d=a.get(c.target);if(f&&d){const h=d.position.x-f.position.x,v=d.position.y-f.position.y,g=Math.sqrt(h*h+v*v);if(g>0){const m=g*g/u,y=h/g*m*.01,b=v/g*m*.01;f.position.x+=y,f.position.y+=b,d.position.x-=y,d.position.y-=b}}});return Array.from(a.values())},[]),n=ee.useCallback((i,t)=>{const a=new Map;i.forEach(s=>{const l=s.data.domain||"general";a.has(l)||a.set(l,[]),a.get(l).push(s)});const o=new Map;let u=0;return a.forEach((s,l)=>{const f=e(s,t.filter(h=>{const v=s.find(m=>m.id===h.source),g=s.find(m=>m.id===h.target);return v&&g})).map(h=>({...h,position:{x:h.position.x+u,y:h.position.y}}));o.set(l,f),u=Math.max(...f.map(h=>h.position.x))+300}),Array.from(o.values()).flat()},[e]);return{applyLayout:e,applyForceLayout:r,applyDomainLayout:n}}function F0(){const{fitView:e}=ig(),r=De(l=>l.graph),{showGrid:n,toggleGrid:i,showMinimap:t,toggleMinimap:a,mode:o,setViewMode:u}=Ge(),s=[{id:"overview",label:"Overview",description:"Simplified view"},{id:"detailed",label:"Detailed",description:"Show all attributes"},{id:"domain",label:"By Domain",description:"Group by domain"},{id:"compact",label:"Compact",description:"Minimal view"}];return p.jsxs("div",{className:"absolute left-4 top-4 flex items-center gap-2",children:[p.jsxs(Wv,{children:[p.jsxs(Yr,{children:[p.jsx(Wr,{asChild:!0,children:p.jsx("button",{onClick:()=>e({padding:.2}),className:"rounded-md border bg-background p-2 shadow-sm hover:bg-muted","aria-label":"Fit to view",children:p.jsx(qg,{size:16})})}),p.jsx(Qr,{children:p.jsxs(Xr,{className:"z-50 rounded-md bg-foreground px-3 py-1.5 text-xs text-background shadow-md",sideOffset:5,children:["Fit to view",p.jsx(Zr,{className:"fill-foreground"})]})})]}),p.jsxs(Yr,{children:[p.jsx(Wr,{asChild:!0,children:p.jsx("button",{onClick:i,className:`rounded-md border bg-background p-2 shadow-sm hover:bg-muted ${n?"text-blue-600":""}`,"aria-label":"Toggle grid",children:p.jsx(_g,{size:16})})}),p.jsx(Qr,{children:p.jsxs(Xr,{className:"z-50 rounded-md bg-foreground px-3 py-1.5 text-xs text-background shadow-md",sideOffset:5,children:["Toggle grid",p.jsx(Zr,{className:"fill-foreground"})]})})]}),p.jsxs(Yr,{children:[p.jsx(Wr,{asChild:!0,children:p.jsx("button",{onClick:a,className:`rounded-md border bg-background p-2 shadow-sm hover:bg-muted ${t?"text-blue-600":""}`,"aria-label":"Toggle minimap",children:p.jsx(Ag,{size:16})})}),p.jsx(Qr,{children:p.jsxs(Xr,{className:"z-50 rounded-md bg-foreground px-3 py-1.5 text-xs text-background shadow-md",sideOffset:5,children:["Toggle minimap",p.jsx(Zr,{className:"fill-foreground"})]})})]}),p.jsxs(Xo,{children:[p.jsx(Zo,{asChild:!0,children:p.jsxs("button",{className:"flex items-center gap-2 rounded-md border bg-background px-3 py-2 text-sm shadow-sm hover:bg-muted","aria-label":"Select view mode",children:[p.jsx(wg,{size:16}),p.jsx("span",{className:"capitalize",children:o})]})}),p.jsx(er,{children:p.jsxs(Jo,{className:"z-50 min-w-[200px] rounded-md border bg-background p-1 shadow-lg",sideOffset:5,children:[p.jsx(eu,{className:"px-2 py-1.5 text-sm font-semibold",children:"View Mode"}),p.jsx(ru,{className:"my-1 h-px bg-border"}),s.map(l=>p.jsxs(Fe,{className:"flex cursor-pointer flex-col rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>u(l.id),children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{children:l.label}),o===l.id&&p.jsx("span",{className:"text-blue-600",children:"✓"})]}),p.jsx("span",{className:"text-xs text-muted-foreground",children:l.description})]},l.id))]})})]}),p.jsxs(Xo,{children:[p.jsx(Zo,{asChild:!0,children:p.jsxs("button",{className:"flex items-center gap-2 rounded-md border bg-background px-3 py-2 text-sm shadow-sm hover:bg-muted","aria-label":"Export",children:[p.jsx(mg,{size:16}),p.jsx("span",{children:"Export"})]})}),p.jsx(er,{children:p.jsxs(Jo,{className:"z-50 min-w-[160px] rounded-md border bg-background p-1 shadow-lg",sideOffset:5,children:[p.jsx(eu,{className:"px-2 py-1.5 text-sm font-semibold",children:"Export As"}),p.jsx(ru,{className:"my-1 h-px bg-border"}),p.jsx(Fe,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>{},children:"PNG Image"}),p.jsx(Fe,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>{},children:"SVG Vector"}),p.jsx(Fe,{className:"flex cursor-pointer items-center rounded px-2 py-1.5 text-sm outline-none hover:bg-muted",onClick:()=>{},children:"JSON Data"})]})})]})]}),r&&p.jsxs("div",{className:"ml-4 flex items-center gap-4 text-sm text-muted-foreground",children:[p.jsxs("span",{children:[r.nodes.length," entities"]}),p.jsxs("span",{children:[r.edges.length," relationships"]})]})]})}const M0={default:Ch};function P0(){const e=De(d=>d.graph),{showMinimap:r,showGrid:n}=Ge(),[i,t,a]=tg([]),[o,u,s]=ag([]),{applyLayout:l}=L0();ee.useEffect(()=>{if(e){const d=l(e.nodes,e.edges);t(d),u(e.edges)}},[e,t,u,l]);const c=ee.useCallback(d=>u(h=>og(d,h)),[u]),f=ee.useCallback((d,h)=>{const{toggleNodeExpanded:v}=De.getState();v(h.id)},[]);return e?p.jsxs("div",{className:"relative h-full w-full",children:[p.jsxs(ug,{nodes:i,edges:o,onNodesChange:a,onEdgesChange:s,onConnect:c,onNodeDoubleClick:f,nodeTypes:M0,fitView:!0,attributionPosition:"bottom-left",className:"bg-background",children:[n&&p.jsx(sg,{variant:cg.Dots,gap:16,size:1,className:"bg-muted/20"}),p.jsx(lg,{position:"bottom-right"}),r&&p.jsx(fg,{position:"top-right",nodeColor:d=>{var v;return{core:"#3B82F6",relationship:"#10B981",metadata:"#F59E0B",experimental:"#8B5CF6",enum:"#6B7280"}[(v=d.data)==null?void 0:v.type]||"#6B7280"},nodeStrokeWidth:3,pannable:!0,zoomable:!0})]}),p.jsx(F0,{})]}):p.jsx("div",{className:"flex h-full items-center justify-center",children:p.jsx("p",{className:"text-muted-foreground",children:"No schema loaded"})})}function D0(){const[e,r]=ee.useState(!1),n=De(d=>d.graph),{searchQuery:i,setSearchQuery:t,selectedTypes:a,toggleEntityType:o,showRelationships:u,toggleRelationships:s,clearFilters:l}=Ge();if(!n)return null;const c=[{id:"core",label:"Core Entities",color:"bg-entity-core"},{id:"relationship",label:"Relationships",color:"bg-entity-relationship"},{id:"metadata",label:"Metadata",color:"bg-entity-metadata"},{id:"experimental",label:"Experimental",color:"bg-entity-experimental"},{id:"enum",label:"Enumerations",color:"bg-entity-enum"}],f=n.nodes.filter(d=>{var h;if(!a.includes(d.data.type))return!1;if(i){const v=i.toLowerCase();return d.data.label.toLowerCase().includes(v)||((h=d.data.description)==null?void 0:h.toLowerCase().includes(v))||d.data.attributes.some(g=>g.name.toLowerCase().includes(v))}return!0});return p.jsxs("div",{className:rr("relative flex h-full flex-col border-r bg-background transition-all duration-300",e?"w-12":"w-80"),children:[p.jsx("button",{onClick:()=>r(!e),className:"absolute -right-3 top-4 z-10 rounded-full border bg-background p-1 shadow-sm hover:bg-muted","aria-label":e?"Expand sidebar":"Collapse sidebar",children:e?p.jsx(wh,{size:14}):p.jsx(gg,{size:14})}),!e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"border-b p-4",children:p.jsxs("div",{className:"relative",children:[p.jsx(Sg,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),p.jsx("input",{type:"text",placeholder:"Search entities...",value:i,onChange:d=>t(d.target.value),className:"w-full rounded-md border bg-background py-2 pl-10 pr-10 text-sm outline-none focus:border-blue-500"}),i&&p.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:p.jsx(Ig,{size:16})})]})}),p.jsxs("div",{className:"border-b p-4",children:[p.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[p.jsxs("h3",{className:"flex items-center gap-2 text-sm font-medium",children:[p.jsx(bg,{size:14}),"Filters"]}),p.jsx("button",{onClick:l,className:"text-xs text-muted-foreground hover:text-foreground",children:"Clear all"})]}),p.jsx("div",{className:"space-y-2",children:c.map(d=>p.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm",children:[p.jsx("input",{type:"checkbox",checked:a.includes(d.id),onChange:()=>o(d.id),className:"rounded"}),p.jsx("span",{className:rr("h-3 w-3 rounded",d.color)}),p.jsx("span",{children:d.label})]},d.id))}),p.jsx("div",{className:"mt-3 border-t pt-3",children:p.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm",children:[p.jsx("input",{type:"checkbox",checked:u,onChange:s,className:"rounded"}),p.jsx("span",{children:"Show connections"})]})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[p.jsx("div",{className:"mb-3 flex items-center justify-between",children:p.jsxs("h3",{className:"text-sm font-medium",children:["Entities (",f.length,"/",n.nodes.length,")"]})}),p.jsx("div",{className:"space-y-2",children:f.map(d=>p.jsxs("div",{className:"cursor-pointer rounded-md border p-2 text-sm hover:bg-muted",onClick:()=>{},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:rr("h-2 w-2 rounded-full",{"bg-entity-core":d.data.type==="core","bg-entity-relationship":d.data.type==="relationship","bg-entity-metadata":d.data.type==="metadata","bg-entity-experimental":d.data.type==="experimental","bg-entity-enum":d.data.type==="enum"})}),p.jsx("span",{className:"font-medium",children:d.data.label})]}),d.data.description&&p.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:d.data.description}),p.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[d.data.attributes.length," attributes"]})]},d.id))})]})]})]})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Up(e){return typeof e>"u"||e===null}function B0(e){return typeof e=="object"&&e!==null}function G0(e){return Array.isArray(e)?e:Up(e)?[]:[e]}function U0(e,r){var n,i,t,a;if(r)for(a=Object.keys(r),n=0,i=a.length;n<i;n+=1)t=a[n],e[t]=r[t];return e}function H0(e,r){var n="",i;for(i=0;i<r;i+=1)n+=e;return n}function $0(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var z0=Up,K0=B0,V0=G0,Y0=H0,W0=$0,Q0=U0,D={isNothing:z0,isObject:K0,toArray:V0,repeat:Y0,isNegativeZero:W0,extend:Q0};function Hp(e,r){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!r&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function nr(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=Hp(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}nr.prototype=Object.create(Error.prototype);nr.prototype.constructor=nr;nr.prototype.toString=function(r){return this.name+": "+Hp(this,r)};var $=nr;function Yo(e,r,n,i,t){var a="",o="",u=Math.floor(t/2)-1;return i-r>u&&(a=" ... ",r=i-u+a.length),n-i>u&&(o=" ...",n=i+u-o.length),{str:a+e.slice(r,n).replace(/\t/g,"→")+o,pos:i-r+a.length}}function Wo(e,r){return D.repeat(" ",r-e.length)+e}function X0(e,r){if(r=Object.create(r||null),!e.buffer)return null;r.maxLength||(r.maxLength=79),typeof r.indent!="number"&&(r.indent=1),typeof r.linesBefore!="number"&&(r.linesBefore=3),typeof r.linesAfter!="number"&&(r.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],t=[],a,o=-1;a=n.exec(e.buffer);)t.push(a.index),i.push(a.index+a[0].length),e.position<=a.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var u="",s,l,c=Math.min(e.line+r.linesAfter,t.length).toString().length,f=r.maxLength-(r.indent+c+3);for(s=1;s<=r.linesBefore&&!(o-s<0);s++)l=Yo(e.buffer,i[o-s],t[o-s],e.position-(i[o]-i[o-s]),f),u=D.repeat(" ",r.indent)+Wo((e.line-s+1).toString(),c)+" | "+l.str+`
`+u;for(l=Yo(e.buffer,i[o],t[o],e.position,f),u+=D.repeat(" ",r.indent)+Wo((e.line+1).toString(),c)+" | "+l.str+`
`,u+=D.repeat("-",r.indent+c+3+l.pos)+`^
`,s=1;s<=r.linesAfter&&!(o+s>=t.length);s++)l=Yo(e.buffer,i[o+s],t[o+s],e.position-(i[o]-i[o+s]),f),u+=D.repeat(" ",r.indent)+Wo((e.line+s+1).toString(),c)+" | "+l.str+`
`;return u.replace(/\n$/,"")}var Z0=X0,J0=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ex=["scalar","sequence","mapping"];function rx(e){var r={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){r[String(i)]=n})}),r}function nx(e,r){if(r=r||{},Object.keys(r).forEach(function(n){if(J0.indexOf(n)===-1)throw new $('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=r,this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(n){return n},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.representName=r.representName||null,this.defaultStyle=r.defaultStyle||null,this.multi=r.multi||!1,this.styleAliases=rx(r.styleAliases||null),ex.indexOf(this.kind)===-1)throw new $('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var U=nx;function th(e,r){var n=[];return e[r].forEach(function(i){var t=n.length;n.forEach(function(a,o){a.tag===i.tag&&a.kind===i.kind&&a.multi===i.multi&&(t=o)}),n[t]=i}),n}function ix(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},r,n;function i(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(r=0,n=arguments.length;r<n;r+=1)arguments[r].forEach(i);return e}function ou(e){return this.extend(e)}ou.prototype.extend=function(r){var n=[],i=[];if(r instanceof U)i.push(r);else if(Array.isArray(r))i=i.concat(r);else if(r&&(Array.isArray(r.implicit)||Array.isArray(r.explicit)))r.implicit&&(n=n.concat(r.implicit)),r.explicit&&(i=i.concat(r.explicit));else throw new $("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(a){if(!(a instanceof U))throw new $("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new $("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new $("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(a){if(!(a instanceof U))throw new $("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create(ou.prototype);return t.implicit=(this.implicit||[]).concat(n),t.explicit=(this.explicit||[]).concat(i),t.compiledImplicit=th(t,"implicit"),t.compiledExplicit=th(t,"explicit"),t.compiledTypeMap=ix(t.compiledImplicit,t.compiledExplicit),t};var $p=ou,zp=new U("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Kp=new U("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Vp=new U("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Yp=new $p({explicit:[zp,Kp,Vp]});function tx(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function ax(){return null}function ox(e){return e===null}var Wp=new U("tag:yaml.org,2002:null",{kind:"scalar",resolve:tx,construct:ax,predicate:ox,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function ux(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function sx(e){return e==="true"||e==="True"||e==="TRUE"}function cx(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Qp=new U("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ux,construct:sx,predicate:cx,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function lx(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function fx(e){return 48<=e&&e<=55}function dx(e){return 48<=e&&e<=57}function hx(e){if(e===null)return!1;var r=e.length,n=0,i=!1,t;if(!r)return!1;if(t=e[n],(t==="-"||t==="+")&&(t=e[++n]),t==="0"){if(n+1===r)return!0;if(t=e[++n],t==="b"){for(n++;n<r;n++)if(t=e[n],t!=="_"){if(t!=="0"&&t!=="1")return!1;i=!0}return i&&t!=="_"}if(t==="x"){for(n++;n<r;n++)if(t=e[n],t!=="_"){if(!lx(e.charCodeAt(n)))return!1;i=!0}return i&&t!=="_"}if(t==="o"){for(n++;n<r;n++)if(t=e[n],t!=="_"){if(!fx(e.charCodeAt(n)))return!1;i=!0}return i&&t!=="_"}}if(t==="_")return!1;for(;n<r;n++)if(t=e[n],t!=="_"){if(!dx(e.charCodeAt(n)))return!1;i=!0}return!(!i||t==="_")}function px(e){var r=e,n=1,i;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),i=r[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),r=r.slice(1),i=r[0]),r==="0")return 0;if(i==="0"){if(r[1]==="b")return n*parseInt(r.slice(2),2);if(r[1]==="x")return n*parseInt(r.slice(2),16);if(r[1]==="o")return n*parseInt(r.slice(2),8)}return n*parseInt(r,10)}function vx(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!D.isNegativeZero(e)}var Xp=new U("tag:yaml.org,2002:int",{kind:"scalar",resolve:hx,construct:px,predicate:vx,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mx(e){return!(e===null||!gx.test(e)||e[e.length-1]==="_")}function bx(e){var r,n;return r=e.replace(/_/g,"").toLowerCase(),n=r[0]==="-"?-1:1,"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:n*parseFloat(r,10)}var yx=/^[-+]?[0-9]+e/;function _x(e,r){var n;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(D.isNegativeZero(e))return"-0.0";return n=e.toString(10),yx.test(n)?n.replace("e",".e"):n}function xx(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||D.isNegativeZero(e))}var Zp=new U("tag:yaml.org,2002:float",{kind:"scalar",resolve:mx,construct:bx,predicate:xx,represent:_x,defaultStyle:"lowercase"}),Jp=Yp.extend({implicit:[Wp,Qp,Xp,Zp]}),ev=Jp,rv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),nv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function wx(e){return e===null?!1:rv.exec(e)!==null||nv.exec(e)!==null}function Ex(e){var r,n,i,t,a,o,u,s=0,l=null,c,f,d;if(r=rv.exec(e),r===null&&(r=nv.exec(e)),r===null)throw new Error("Date resolve error");if(n=+r[1],i=+r[2]-1,t=+r[3],!r[4])return new Date(Date.UTC(n,i,t));if(a=+r[4],o=+r[5],u=+r[6],r[7]){for(s=r[7].slice(0,3);s.length<3;)s+="0";s=+s}return r[9]&&(c=+r[10],f=+(r[11]||0),l=(c*60+f)*6e4,r[9]==="-"&&(l=-l)),d=new Date(Date.UTC(n,i,t,a,o,u,s)),l&&d.setTime(d.getTime()-l),d}function Ax(e){return e.toISOString()}var iv=new U("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:wx,construct:Ex,instanceOf:Date,represent:Ax});function qx(e){return e==="<<"||e===null}var tv=new U("tag:yaml.org,2002:merge",{kind:"scalar",resolve:qx}),Ou=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Cx(e){if(e===null)return!1;var r,n,i=0,t=e.length,a=Ou;for(n=0;n<t;n++)if(r=a.indexOf(e.charAt(n)),!(r>64)){if(r<0)return!1;i+=6}return i%8===0}function Sx(e){var r,n,i=e.replace(/[\r\n=]/g,""),t=i.length,a=Ou,o=0,u=[];for(r=0;r<t;r++)r%4===0&&r&&(u.push(o>>16&255),u.push(o>>8&255),u.push(o&255)),o=o<<6|a.indexOf(i.charAt(r));return n=t%4*6,n===0?(u.push(o>>16&255),u.push(o>>8&255),u.push(o&255)):n===18?(u.push(o>>10&255),u.push(o>>2&255)):n===12&&u.push(o>>4&255),new Uint8Array(u)}function Rx(e){var r="",n=0,i,t,a=e.length,o=Ou;for(i=0;i<a;i++)i%3===0&&i&&(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[n&63]),n=(n<<8)+e[i];return t=a%3,t===0?(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[n&63]):t===2?(r+=o[n>>10&63],r+=o[n>>4&63],r+=o[n<<2&63],r+=o[64]):t===1&&(r+=o[n>>2&63],r+=o[n<<4&63],r+=o[64],r+=o[64]),r}function Tx(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var av=new U("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Cx,construct:Sx,predicate:Tx,represent:Rx}),Ix=Object.prototype.hasOwnProperty,Ox=Object.prototype.toString;function jx(e){if(e===null)return!0;var r=[],n,i,t,a,o,u=e;for(n=0,i=u.length;n<i;n+=1){if(t=u[n],o=!1,Ox.call(t)!=="[object Object]")return!1;for(a in t)if(Ix.call(t,a))if(!o)o=!0;else return!1;if(!o)return!1;if(r.indexOf(a)===-1)r.push(a);else return!1}return!0}function Nx(e){return e!==null?e:[]}var ov=new U("tag:yaml.org,2002:omap",{kind:"sequence",resolve:jx,construct:Nx}),kx=Object.prototype.toString;function Lx(e){if(e===null)return!0;var r,n,i,t,a,o=e;for(a=new Array(o.length),r=0,n=o.length;r<n;r+=1){if(i=o[r],kx.call(i)!=="[object Object]"||(t=Object.keys(i),t.length!==1))return!1;a[r]=[t[0],i[t[0]]]}return!0}function Fx(e){if(e===null)return[];var r,n,i,t,a,o=e;for(a=new Array(o.length),r=0,n=o.length;r<n;r+=1)i=o[r],t=Object.keys(i),a[r]=[t[0],i[t[0]]];return a}var uv=new U("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Lx,construct:Fx}),Mx=Object.prototype.hasOwnProperty;function Px(e){if(e===null)return!0;var r,n=e;for(r in n)if(Mx.call(n,r)&&n[r]!==null)return!1;return!0}function Dx(e){return e!==null?e:{}}var sv=new U("tag:yaml.org,2002:set",{kind:"mapping",resolve:Px,construct:Dx}),ju=ev.extend({implicit:[iv,tv],explicit:[av,ov,uv,sv]}),_e=Object.prototype.hasOwnProperty,wr=1,cv=2,lv=3,Er=4,Qo=1,Bx=2,ah=3,Gx=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ux=/[\x85\u2028\u2029]/,Hx=/[,\[\]\{\}]/,fv=/^(?:!|!!|![a-z\-]+!)$/i,dv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function oh(e){return Object.prototype.toString.call(e)}function re(e){return e===10||e===13}function Ae(e){return e===9||e===32}function K(e){return e===9||e===32||e===10||e===13}function Me(e){return e===44||e===91||e===93||e===123||e===125}function $x(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function zx(e){return e===120?2:e===117?4:e===85?8:0}function Kx(e){return 48<=e&&e<=57?e-48:-1}function uh(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function Vx(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var hv=new Array(256),pv=new Array(256);for(var ke=0;ke<256;ke++)hv[ke]=uh(ke)?1:0,pv[ke]=uh(ke);function Yx(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||ju,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function vv(e,r){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Z0(n),new $(r,n)}function _(e,r){throw vv(e,r)}function Ar(e,r){e.onWarning&&e.onWarning.call(null,vv(e,r))}var sh={YAML:function(r,n,i){var t,a,o;r.version!==null&&_(r,"duplication of %YAML directive"),i.length!==1&&_(r,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),t===null&&_(r,"ill-formed argument of the YAML directive"),a=parseInt(t[1],10),o=parseInt(t[2],10),a!==1&&_(r,"unacceptable YAML version of the document"),r.version=i[0],r.checkLineBreaks=o<2,o!==1&&o!==2&&Ar(r,"unsupported YAML version of the document")},TAG:function(r,n,i){var t,a;i.length!==2&&_(r,"TAG directive accepts exactly two arguments"),t=i[0],a=i[1],fv.test(t)||_(r,"ill-formed tag handle (first argument) of the TAG directive"),_e.call(r.tagMap,t)&&_(r,'there is a previously declared suffix for "'+t+'" tag handle'),dv.test(a)||_(r,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{_(r,"tag prefix is malformed: "+a)}r.tagMap[t]=a}};function be(e,r,n,i){var t,a,o,u;if(r<n){if(u=e.input.slice(r,n),i)for(t=0,a=u.length;t<a;t+=1)o=u.charCodeAt(t),o===9||32<=o&&o<=1114111||_(e,"expected valid JSON character");else Gx.test(u)&&_(e,"the stream contains non-printable characters");e.result+=u}}function ch(e,r,n,i){var t,a,o,u;for(D.isObject(n)||_(e,"cannot merge mappings; the provided source object is unacceptable"),t=Object.keys(n),o=0,u=t.length;o<u;o+=1)a=t[o],_e.call(r,a)||(r[a]=n[a],i[a]=!0)}function Pe(e,r,n,i,t,a,o,u,s){var l,c;if(Array.isArray(t))for(t=Array.prototype.slice.call(t),l=0,c=t.length;l<c;l+=1)Array.isArray(t[l])&&_(e,"nested arrays are not supported inside keys"),typeof t=="object"&&oh(t[l])==="[object Object]"&&(t[l]="[object Object]");if(typeof t=="object"&&oh(t)==="[object Object]"&&(t="[object Object]"),t=String(t),r===null&&(r={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(l=0,c=a.length;l<c;l+=1)ch(e,r,a[l],n);else ch(e,r,a,n);else!e.json&&!_e.call(n,t)&&_e.call(r,t)&&(e.line=o||e.line,e.lineStart=u||e.lineStart,e.position=s||e.position,_(e,"duplicated mapping key")),t==="__proto__"?Object.defineProperty(r,t,{configurable:!0,enumerable:!0,writable:!0,value:a}):r[t]=a,delete n[t];return r}function Nu(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):_(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function M(e,r,n){for(var i=0,t=e.input.charCodeAt(e.position);t!==0;){for(;Ae(t);)t===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),t=e.input.charCodeAt(++e.position);if(r&&t===35)do t=e.input.charCodeAt(++e.position);while(t!==10&&t!==13&&t!==0);if(re(t))for(Nu(e),t=e.input.charCodeAt(e.position),i++,e.lineIndent=0;t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&Ar(e,"deficient indentation"),i}function Kr(e){var r=e.position,n;return n=e.input.charCodeAt(r),!!((n===45||n===46)&&n===e.input.charCodeAt(r+1)&&n===e.input.charCodeAt(r+2)&&(r+=3,n=e.input.charCodeAt(r),n===0||K(n)))}function ku(e,r){r===1?e.result+=" ":r>1&&(e.result+=D.repeat(`
`,r-1))}function Wx(e,r,n){var i,t,a,o,u,s,l,c,f=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),K(h)||Me(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(t=e.input.charCodeAt(e.position+1),K(t)||n&&Me(t)))return!1;for(e.kind="scalar",e.result="",a=o=e.position,u=!1;h!==0;){if(h===58){if(t=e.input.charCodeAt(e.position+1),K(t)||n&&Me(t))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),K(i))break}else{if(e.position===e.lineStart&&Kr(e)||n&&Me(h))break;if(re(h))if(s=e.line,l=e.lineStart,c=e.lineIndent,M(e,!1,-1),e.lineIndent>=r){u=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=s,e.lineStart=l,e.lineIndent=c;break}}u&&(be(e,a,o,!1),ku(e,e.line-s),a=o=e.position,u=!1),Ae(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return be(e,a,o,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function Qx(e,r){var n,i,t;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=t=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(be(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,t=e.position;else return!0;else re(n)?(be(e,i,t,!0),ku(e,M(e,!1,r)),i=t=e.position):e.position===e.lineStart&&Kr(e)?_(e,"unexpected end of the document within a single quoted scalar"):(e.position++,t=e.position);_(e,"unexpected end of the stream within a single quoted scalar")}function Xx(e,r){var n,i,t,a,o,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return be(e,n,e.position,!0),e.position++,!0;if(u===92){if(be(e,n,e.position,!0),u=e.input.charCodeAt(++e.position),re(u))M(e,!1,r);else if(u<256&&hv[u])e.result+=pv[u],e.position++;else if((o=zx(u))>0){for(t=o,a=0;t>0;t--)u=e.input.charCodeAt(++e.position),(o=$x(u))>=0?a=(a<<4)+o:_(e,"expected hexadecimal character");e.result+=Vx(a),e.position++}else _(e,"unknown escape sequence");n=i=e.position}else re(u)?(be(e,n,i,!0),ku(e,M(e,!1,r)),n=i=e.position):e.position===e.lineStart&&Kr(e)?_(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}_(e,"unexpected end of the stream within a double quoted scalar")}function Zx(e,r){var n=!0,i,t,a,o=e.tag,u,s=e.anchor,l,c,f,d,h,v=Object.create(null),g,m,y,b;if(b=e.input.charCodeAt(e.position),b===91)c=93,h=!1,u=[];else if(b===123)c=125,h=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),b=e.input.charCodeAt(++e.position);b!==0;){if(M(e,!0,r),b=e.input.charCodeAt(e.position),b===c)return e.position++,e.tag=o,e.anchor=s,e.kind=h?"mapping":"sequence",e.result=u,!0;n?b===44&&_(e,"expected the node content, but found ','"):_(e,"missed comma between flow collection entries"),m=g=y=null,f=d=!1,b===63&&(l=e.input.charCodeAt(e.position+1),K(l)&&(f=d=!0,e.position++,M(e,!0,r))),i=e.line,t=e.lineStart,a=e.position,Be(e,r,wr,!1,!0),m=e.tag,g=e.result,M(e,!0,r),b=e.input.charCodeAt(e.position),(d||e.line===i)&&b===58&&(f=!0,b=e.input.charCodeAt(++e.position),M(e,!0,r),Be(e,r,wr,!1,!0),y=e.result),h?Pe(e,u,v,m,g,y,i,t,a):f?u.push(Pe(e,null,v,m,g,y,i,t,a)):u.push(g),M(e,!0,r),b=e.input.charCodeAt(e.position),b===44?(n=!0,b=e.input.charCodeAt(++e.position)):n=!1}_(e,"unexpected end of the stream within a flow collection")}function Jx(e,r){var n,i,t=Qo,a=!1,o=!1,u=r,s=0,l=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Qo===t?t=f===43?ah:Bx:_(e,"repeat of a chomping mode identifier");else if((c=Kx(f))>=0)c===0?_(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?_(e,"repeat of an indentation width identifier"):(u=r+c-1,o=!0);else break;if(Ae(f)){do f=e.input.charCodeAt(++e.position);while(Ae(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!re(f)&&f!==0)}for(;f!==0;){for(Nu(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<u)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>u&&(u=e.lineIndent),re(f)){s++;continue}if(e.lineIndent<u){t===ah?e.result+=D.repeat(`
`,a?1+s:s):t===Qo&&a&&(e.result+=`
`);break}for(i?Ae(f)?(l=!0,e.result+=D.repeat(`
`,a?1+s:s)):l?(l=!1,e.result+=D.repeat(`
`,s+1)):s===0?a&&(e.result+=" "):e.result+=D.repeat(`
`,s):e.result+=D.repeat(`
`,a?1+s:s),a=!0,o=!0,s=0,n=e.position;!re(f)&&f!==0;)f=e.input.charCodeAt(++e.position);be(e,n,e.position,!1)}return!0}function lh(e,r){var n,i=e.tag,t=e.anchor,a=[],o,u=!1,s;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),s=e.input.charCodeAt(e.position);s!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_(e,"tab characters must not be used in indentation")),!(s!==45||(o=e.input.charCodeAt(e.position+1),!K(o))));){if(u=!0,e.position++,M(e,!0,-1)&&e.lineIndent<=r){a.push(null),s=e.input.charCodeAt(e.position);continue}if(n=e.line,Be(e,r,lv,!1,!0),a.push(e.result),M(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>r)&&s!==0)_(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return u?(e.tag=i,e.anchor=t,e.kind="sequence",e.result=a,!0):!1}function ew(e,r,n){var i,t,a,o,u,s,l=e.tag,c=e.anchor,f={},d=Object.create(null),h=null,v=null,g=null,m=!1,y=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),b=e.input.charCodeAt(e.position);b!==0;){if(!m&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,_(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),a=e.line,(b===63||b===58)&&K(i))b===63?(m&&(Pe(e,f,d,h,v,null,o,u,s),h=v=g=null),y=!0,m=!0,t=!0):m?(m=!1,t=!0):_(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=i;else{if(o=e.line,u=e.lineStart,s=e.position,!Be(e,n,cv,!1,!0))break;if(e.line===a){for(b=e.input.charCodeAt(e.position);Ae(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),K(b)||_(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Pe(e,f,d,h,v,null,o,u,s),h=v=g=null),y=!0,m=!1,t=!1,h=e.tag,v=e.result;else if(y)_(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=l,e.anchor=c,!0}else if(y)_(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=l,e.anchor=c,!0}if((e.line===a||e.lineIndent>r)&&(m&&(o=e.line,u=e.lineStart,s=e.position),Be(e,r,Er,!0,t)&&(m?v=e.result:g=e.result),m||(Pe(e,f,d,h,v,g,o,u,s),h=v=g=null),M(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>r)&&b!==0)_(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return m&&Pe(e,f,d,h,v,null,o,u,s),y&&(e.tag=l,e.anchor=c,e.kind="mapping",e.result=f),y}function rw(e){var r,n=!1,i=!1,t,a,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&_(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,t="!!",o=e.input.charCodeAt(++e.position)):t="!",r=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(a=e.input.slice(r,e.position),o=e.input.charCodeAt(++e.position)):_(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!K(o);)o===33&&(i?_(e,"tag suffix cannot contain exclamation marks"):(t=e.input.slice(r-1,e.position+1),fv.test(t)||_(e,"named tag handle cannot contain such characters"),i=!0,r=e.position+1)),o=e.input.charCodeAt(++e.position);a=e.input.slice(r,e.position),Hx.test(a)&&_(e,"tag suffix cannot contain flow indicator characters")}a&&!dv.test(a)&&_(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{_(e,"tag name is malformed: "+a)}return n?e.tag=a:_e.call(e.tagMap,t)?e.tag=e.tagMap[t]+a:t==="!"?e.tag="!"+a:t==="!!"?e.tag="tag:yaml.org,2002:"+a:_(e,'undeclared tag handle "'+t+'"'),!0}function nw(e){var r,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&_(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),r=e.position;n!==0&&!K(n)&&!Me(n);)n=e.input.charCodeAt(++e.position);return e.position===r&&_(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function iw(e){var r,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),r=e.position;i!==0&&!K(i)&&!Me(i);)i=e.input.charCodeAt(++e.position);return e.position===r&&_(e,"name of an alias node must contain at least one character"),n=e.input.slice(r,e.position),_e.call(e.anchorMap,n)||_(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],M(e,!0,-1),!0}function Be(e,r,n,i,t){var a,o,u,s=1,l=!1,c=!1,f,d,h,v,g,m;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=u=Er===n||lv===n,i&&M(e,!0,-1)&&(l=!0,e.lineIndent>r?s=1:e.lineIndent===r?s=0:e.lineIndent<r&&(s=-1)),s===1)for(;rw(e)||nw(e);)M(e,!0,-1)?(l=!0,u=a,e.lineIndent>r?s=1:e.lineIndent===r?s=0:e.lineIndent<r&&(s=-1)):u=!1;if(u&&(u=l||t),(s===1||Er===n)&&(wr===n||cv===n?g=r:g=r+1,m=e.position-e.lineStart,s===1?u&&(lh(e,m)||ew(e,m,g))||Zx(e,g)?c=!0:(o&&Jx(e,g)||Qx(e,g)||Xx(e,g)?c=!0:iw(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&_(e,"alias node should not have any properties")):Wx(e,g,wr===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):s===0&&(c=u&&lh(e,m))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&_(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(v=e.implicitTypes[f],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(_e.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,h=e.typeMap.multi[e.kind||"fallback"],f=0,d=h.length;f<d;f+=1)if(e.tag.slice(0,h[f].tag.length)===h[f].tag){v=h[f];break}v||_(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&_(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):_(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function tw(e){var r=e.position,n,i,t,a=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(M(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(a=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!K(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),t=[],i.length<1&&_(e,"directive name must not be less than one character in length");o!==0;){for(;Ae(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!re(o));break}if(re(o))break;for(n=e.position;o!==0&&!K(o);)o=e.input.charCodeAt(++e.position);t.push(e.input.slice(n,e.position))}o!==0&&Nu(e),_e.call(sh,i)?sh[i](e,i,t):Ar(e,'unknown document directive "'+i+'"')}if(M(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,M(e,!0,-1)):a&&_(e,"directives end mark is expected"),Be(e,e.lineIndent-1,Er,!1,!0),M(e,!0,-1),e.checkLineBreaks&&Ux.test(e.input.slice(r,e.position))&&Ar(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Kr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,M(e,!0,-1));return}if(e.position<e.length-1)_(e,"end of the stream or a document separator is expected");else return}function gv(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Yx(e,r),i=e.indexOf("\0");for(i!==-1&&(n.position=i,_(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)tw(n);return n.documents}function aw(e,r,n){r!==null&&typeof r=="object"&&typeof n>"u"&&(n=r,r=null);var i=gv(e,n);if(typeof r!="function")return i;for(var t=0,a=i.length;t<a;t+=1)r(i[t])}function ow(e,r){var n=gv(e,r);if(n.length!==0){if(n.length===1)return n[0];throw new $("expected a single document in the stream, but found more")}}var uw=aw,sw=ow,mv={loadAll:uw,load:sw},bv=Object.prototype.toString,yv=Object.prototype.hasOwnProperty,Lu=65279,cw=9,ir=10,lw=13,fw=32,dw=33,hw=34,uu=35,pw=37,vw=38,gw=39,mw=42,_v=44,bw=45,qr=58,yw=61,_w=62,xw=63,ww=64,xv=91,wv=93,Ew=96,Ev=123,Aw=124,Av=125,H={};H[0]="\\0";H[7]="\\a";H[8]="\\b";H[9]="\\t";H[10]="\\n";H[11]="\\v";H[12]="\\f";H[13]="\\r";H[27]="\\e";H[34]='\\"';H[92]="\\\\";H[133]="\\N";H[160]="\\_";H[8232]="\\L";H[8233]="\\P";var qw=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Cw=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Sw(e,r){var n,i,t,a,o,u,s;if(r===null)return{};for(n={},i=Object.keys(r),t=0,a=i.length;t<a;t+=1)o=i[t],u=String(r[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),s=e.compiledTypeMap.fallback[o],s&&yv.call(s.styleAliases,u)&&(u=s.styleAliases[u]),n[o]=u;return n}function Rw(e){var r,n,i;if(r=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else if(e<=4294967295)n="U",i=8;else throw new $("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+D.repeat("0",i-r.length)+r}var Tw=1,tr=2;function Iw(e){this.schema=e.schema||ju,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=D.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Sw(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?tr:Tw,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fh(e,r){for(var n=D.repeat(" ",r),i=0,t=-1,a="",o,u=e.length;i<u;)t=e.indexOf(`
`,i),t===-1?(o=e.slice(i),i=u):(o=e.slice(i,t+1),i=t+1),o.length&&o!==`
`&&(a+=n),a+=o;return a}function su(e,r){return`
`+D.repeat(" ",e.indent*r)}function Ow(e,r){var n,i,t;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(t=e.implicitTypes[n],t.resolve(r))return!0;return!1}function Cr(e){return e===fw||e===cw}function ar(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Lu||65536<=e&&e<=1114111}function dh(e){return ar(e)&&e!==Lu&&e!==lw&&e!==ir}function hh(e,r,n){var i=dh(e),t=i&&!Cr(e);return(n?i:i&&e!==_v&&e!==xv&&e!==wv&&e!==Ev&&e!==Av)&&e!==uu&&!(r===qr&&!t)||dh(r)&&!Cr(r)&&e===uu||r===qr&&t}function jw(e){return ar(e)&&e!==Lu&&!Cr(e)&&e!==bw&&e!==xw&&e!==qr&&e!==_v&&e!==xv&&e!==wv&&e!==Ev&&e!==Av&&e!==uu&&e!==vw&&e!==mw&&e!==dw&&e!==Aw&&e!==yw&&e!==_w&&e!==gw&&e!==hw&&e!==pw&&e!==ww&&e!==Ew}function Nw(e){return!Cr(e)&&e!==qr}function Je(e,r){var n=e.charCodeAt(r),i;return n>=55296&&n<=56319&&r+1<e.length&&(i=e.charCodeAt(r+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function qv(e){var r=/^\n* /;return r.test(e)}var Cv=1,cu=2,Sv=3,Rv=4,Le=5;function kw(e,r,n,i,t,a,o,u){var s,l=0,c=null,f=!1,d=!1,h=i!==-1,v=-1,g=jw(Je(e,0))&&Nw(Je(e,e.length-1));if(r||o)for(s=0;s<e.length;l>=65536?s+=2:s++){if(l=Je(e,s),!ar(l))return Le;g=g&&hh(l,c,u),c=l}else{for(s=0;s<e.length;l>=65536?s+=2:s++){if(l=Je(e,s),l===ir)f=!0,h&&(d=d||s-v-1>i&&e[v+1]!==" ",v=s);else if(!ar(l))return Le;g=g&&hh(l,c,u),c=l}d=d||h&&s-v-1>i&&e[v+1]!==" "}return!f&&!d?g&&!o&&!t(e)?Cv:a===tr?Le:cu:n>9&&qv(e)?Le:o?a===tr?Le:cu:d?Rv:Sv}function Lw(e,r,n,i,t){e.dump=function(){if(r.length===0)return e.quotingType===tr?'""':"''";if(!e.noCompatMode&&(qw.indexOf(r)!==-1||Cw.test(r)))return e.quotingType===tr?'"'+r+'"':"'"+r+"'";var a=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),u=i||e.flowLevel>-1&&n>=e.flowLevel;function s(l){return Ow(e,l)}switch(kw(r,u,e.indent,o,s,e.quotingType,e.forceQuotes&&!i,t)){case Cv:return r;case cu:return"'"+r.replace(/'/g,"''")+"'";case Sv:return"|"+ph(r,e.indent)+vh(fh(r,a));case Rv:return">"+ph(r,e.indent)+vh(fh(Fw(r,o),a));case Le:return'"'+Mw(r)+'"';default:throw new $("impossible error: invalid scalar style")}}()}function ph(e,r){var n=qv(e)?String(r):"",i=e[e.length-1]===`
`,t=i&&(e[e.length-2]===`
`||e===`
`),a=t?"+":i?"":"-";return n+a+`
`}function vh(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Fw(e,r){for(var n=/(\n+)([^\n]*)/g,i=function(){var l=e.indexOf(`
`);return l=l!==-1?l:e.length,n.lastIndex=l,gh(e.slice(0,l),r)}(),t=e[0]===`
`||e[0]===" ",a,o;o=n.exec(e);){var u=o[1],s=o[2];a=s[0]===" ",i+=u+(!t&&!a&&s!==""?`
`:"")+gh(s,r),t=a}return i}function gh(e,r){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,i,t=0,a,o=0,u=0,s="";i=n.exec(e);)u=i.index,u-t>r&&(a=o>t?o:u,s+=`
`+e.slice(t,a),t=a+1),o=u;return s+=`
`,e.length-t>r&&o>t?s+=e.slice(t,o)+`
`+e.slice(o+1):s+=e.slice(t),s.slice(1)}function Mw(e){for(var r="",n=0,i,t=0;t<e.length;n>=65536?t+=2:t++)n=Je(e,t),i=H[n],!i&&ar(n)?(r+=e[t],n>=65536&&(r+=e[t+1])):r+=i||Rw(n);return r}function Pw(e,r,n){var i="",t=e.tag,a,o,u;for(a=0,o=n.length;a<o;a+=1)u=n[a],e.replacer&&(u=e.replacer.call(n,String(a),u)),(ce(e,r,u,!1,!1)||typeof u>"u"&&ce(e,r,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=t,e.dump="["+i+"]"}function mh(e,r,n,i){var t="",a=e.tag,o,u,s;for(o=0,u=n.length;o<u;o+=1)s=n[o],e.replacer&&(s=e.replacer.call(n,String(o),s)),(ce(e,r+1,s,!0,!0,!1,!0)||typeof s>"u"&&ce(e,r+1,null,!0,!0,!1,!0))&&((!i||t!=="")&&(t+=su(e,r)),e.dump&&ir===e.dump.charCodeAt(0)?t+="-":t+="- ",t+=e.dump);e.tag=a,e.dump=t||"[]"}function Dw(e,r,n){var i="",t=e.tag,a=Object.keys(n),o,u,s,l,c;for(o=0,u=a.length;o<u;o+=1)c="",i!==""&&(c+=", "),e.condenseFlow&&(c+='"'),s=a[o],l=n[s],e.replacer&&(l=e.replacer.call(n,s,l)),ce(e,r,s,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ce(e,r,l,!1,!1)&&(c+=e.dump,i+=c));e.tag=t,e.dump="{"+i+"}"}function Bw(e,r,n,i){var t="",a=e.tag,o=Object.keys(n),u,s,l,c,f,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new $("sortKeys must be a boolean or a function");for(u=0,s=o.length;u<s;u+=1)d="",(!i||t!=="")&&(d+=su(e,r)),l=o[u],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),ce(e,r+1,l,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&ir===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=su(e,r)),ce(e,r+1,c,!0,f)&&(e.dump&&ir===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,t+=d));e.tag=a,e.dump=t||"{}"}function bh(e,r,n){var i,t,a,o,u,s;for(t=n?e.explicitTypes:e.implicitTypes,a=0,o=t.length;a<o;a+=1)if(u=t[a],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof r=="object"&&r instanceof u.instanceOf)&&(!u.predicate||u.predicate(r))){if(n?u.multi&&u.representName?e.tag=u.representName(r):e.tag=u.tag:e.tag="?",u.represent){if(s=e.styleMap[u.tag]||u.defaultStyle,bv.call(u.represent)==="[object Function]")i=u.represent(r,s);else if(yv.call(u.represent,s))i=u.represent[s](r,s);else throw new $("!<"+u.tag+'> tag resolver accepts not "'+s+'" style');e.dump=i}return!0}return!1}function ce(e,r,n,i,t,a,o){e.tag=null,e.dump=n,bh(e,n,!1)||bh(e,n,!0);var u=bv.call(e.dump),s=i,l;i&&(i=e.flowLevel<0||e.flowLevel>r);var c=u==="[object Object]"||u==="[object Array]",f,d;if(c&&(f=e.duplicates.indexOf(n),d=f!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&r>0)&&(t=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),u==="[object Object]")i&&Object.keys(e.dump).length!==0?(Bw(e,r,e.dump,t),d&&(e.dump="&ref_"+f+e.dump)):(Dw(e,r,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(u==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&r>0?mh(e,r-1,e.dump,t):mh(e,r,e.dump,t),d&&(e.dump="&ref_"+f+e.dump)):(Pw(e,r,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if(u==="[object String]")e.tag!=="?"&&Lw(e,e.dump,r,a,s);else{if(u==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new $("unacceptable kind of an object to dump "+u)}e.tag!==null&&e.tag!=="?"&&(l=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",e.dump=l+" "+e.dump)}return!0}function Gw(e,r){var n=[],i=[],t,a;for(lu(e,n,i),t=0,a=i.length;t<a;t+=1)r.duplicates.push(n[i[t]]);r.usedDuplicates=new Array(a)}function lu(e,r,n){var i,t,a;if(e!==null&&typeof e=="object")if(t=r.indexOf(e),t!==-1)n.indexOf(t)===-1&&n.push(t);else if(r.push(e),Array.isArray(e))for(t=0,a=e.length;t<a;t+=1)lu(e[t],r,n);else for(i=Object.keys(e),t=0,a=i.length;t<a;t+=1)lu(e[i[t]],r,n)}function Uw(e,r){r=r||{};var n=new Iw(r);n.noRefs||Gw(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),ce(n,0,i,!0,!0)?n.dump+`
`:""}var Hw=Uw,$w={dump:Hw};function Fu(e,r){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+r+" instead, which is now safe by default.")}}var zw=U,Kw=$p,Vw=Yp,Yw=Jp,Ww=ev,Qw=ju,Xw=mv.load,Zw=mv.loadAll,Jw=$w.dump,eE=$,rE={binary:av,float:Zp,map:Vp,null:Wp,pairs:uv,set:sv,timestamp:iv,bool:Qp,int:Xp,merge:tv,omap:ov,seq:Kp,str:zp},nE=Fu("safeLoad","load"),iE=Fu("safeLoadAll","loadAll"),tE=Fu("safeDump","dump"),aE={Type:zw,Schema:Kw,FAILSAFE_SCHEMA:Vw,JSON_SCHEMA:Yw,CORE_SCHEMA:Ww,DEFAULT_SCHEMA:Qw,load:Xw,loadAll:Zw,dump:Jw,YAMLException:eE,types:rE,safeLoad:nE,safeLoadAll:iE,safeDump:tE};function oE(e){const r=[],n=[],i=new Map;Object.entries(e.classes).forEach(([a,o])=>{const u=Pg(o),s=uE(o,e),l={id:a,type:"default",position:{x:0,y:0},data:{label:a,description:o.description,type:u,domain:sE(a),isExpanded:!1,attributes:s,isRelationship:o.represents_relationship,parentClass:o.is_a}};r.push(l),i.set(a,l)}),Object.entries(e.classes).forEach(([a,o])=>{var u,s,l,c;if(o.is_a&&i.has(o.is_a)&&n.push({id:`${a}-inherits-${o.is_a}`,source:a,target:o.is_a,type:"smoothstep",animated:!1,data:{label:"is_a",cardinality:"one-to-one"}}),o.represents_relationship&&o.slots){const f=o.slots.filter(d=>d.endsWith("_id"));if(f.length>=2){const d=yh(e,f[0]),h=yh(e,f[1]);if(d&&h){const v=(s=(u=o.slot_usage)==null?void 0:u[f[0]])==null?void 0:s.multivalued,g=(c=(l=o.slot_usage)==null?void 0:l[f[1]])==null?void 0:c.multivalued;let m="one-to-one";v&&g?m="many-to-many":(v||g)&&(m="one-to-many"),n.push({id:`${d}-${a}-${h}`,source:d,target:h,type:"smoothstep",animated:!1,data:{label:a,cardinality:m}})}}}});const t=Array.from(new Set(r.map(a=>a.data.domain).filter(Boolean)));return{nodes:r,edges:n,metadata:{entityCount:r.length,relationshipCount:n.length,domains:t,lastUpdated:new Date}}}function uE(e,r){const n=[];return e.slots&&e.slots.forEach(i=>{var o;const t=r.slots[i],a=(o=e.slot_usage)==null?void 0:o[i];t&&n.push({name:i,type:(a==null?void 0:a.range)||t.range||"string",required:(a==null?void 0:a.required)||t.required||!1,isIdentifier:(a==null?void 0:a.identifier)||t.identifier,isMultivalued:(a==null?void 0:a.multivalued)||t.multivalued,description:(a==null?void 0:a.description)||t.description})}),e.attributes&&Object.entries(e.attributes).forEach(([i,t])=>{n.push({name:i,type:t.range||"string",required:t.required||!1,isMultivalued:t.multivalued,description:t.description})}),n}function sE(e,r){const n=e.toLowerCase();return["contig","feature","protein","sequence"].some(i=>n.includes(i))?"genomics":["sample","environmental","gold","mixs"].some(i=>n.includes(i))?"environmental":["experiment","protocol","event"].some(i=>n.includes(i))?"experimental":["contributor","publication","project","datasource"].some(i=>n.includes(i))?"metadata":["cluster","association","measurement"].some(i=>n.includes(i))?"analysis":"general"}function yh(e,r){var a,o,u;const n=r.replace("_id",""),i=n.charAt(0).toUpperCase()+n.slice(1);if(e.classes[i])return i;const t=[n,i,n.toUpperCase(),n==="contig_collection"?"ContigCollection":null,n==="encoded_feature"?"EncodedFeature":null].filter(Boolean);for(const s of t)if(s&&e.classes[s])return s;for(const[s,l]of Object.entries(e.classes))if((a=l.slots)!=null&&a.includes(r)){const c=(o=l.slot_usage)==null?void 0:o[r];if(c!=null&&c.identifier||(u=e.slots[r])!=null&&u.identifier)return s}return null}function cE(){const{loadSchema:e,setGraph:r,setLoading:n,setError:i}=De();return{loadCDMSchema:ee.useCallback(async()=>{n(!0),i(null);try{const a="/cdm_schema_viewer/",o=[`${a}cdm-schema/src/linkml/cdm_schema.yaml`,`${a}cdm-schema/src/linkml/cdm_components.yaml`,`${a}cdm-schema/src/linkml/cdm_base.yaml`,`${a}cdm-schema/src/linkml/cdm_enums.yaml`],s=(await Promise.all(o.map(f=>fetch(f).then(d=>{if(!d.ok)throw new Error(`Failed to fetch ${f}`);return d.text()})))).map(f=>aE.load(f)),l=lE(s);e(l);const c=oE(l);r(c)}catch(a){console.error("Error loading schema:",a),i(a instanceof Error?a.message:"Failed to load schema")}finally{n(!1)}},[e,r,n,i])}}function lE(e){const r={id:e[0].id||"cdm-schema",name:e[0].name||"CDM Schema",description:e[0].description||"KBase Common Data Model",version:e[0].version||"0.0.1",classes:{},slots:{},enums:{}};for(const n of e)n.classes&&Object.assign(r.classes,n.classes),n.slots&&Object.assign(r.slots,n.slots),n.enums&&Object.assign(r.enums||{},n.enums);return r}function fE(){const{loading:e,error:r}=De(),{loadCDMSchema:n}=cE();return ee.useEffect(()=>{n()},[n]),e?p.jsx("div",{className:"flex h-full items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-blue-500"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading CDM Schema..."})]})}):r?p.jsx("div",{className:"flex h-full items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"mb-2 text-red-500",children:"Error loading schema"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:r})]})}):p.jsxs("div",{className:"flex h-full",children:[p.jsx(D0,{}),p.jsx("div",{className:"flex-1",children:p.jsx(P0,{})})]})}function dE(){return p.jsx(dg,{children:p.jsx(Jv,{children:p.jsx(zu,{path:"/",element:p.jsx(Mg,{}),children:p.jsx(zu,{index:!0,element:p.jsx(fE,{})})})})})}nu.createRoot(document.getElementById("root")).render(p.jsx(ue.StrictMode,{children:p.jsx(eg,{basename:"/cdm_schema_viewer",children:p.jsx(dE,{})})}));
//# sourceMappingURL=index-D5WOBRRb.js.map
